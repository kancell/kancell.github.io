(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[74],{"+7SR":function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return v}));var n=c("9og8"),a=c("tJVT"),s=c("WmNS"),r=c.n(s),i=c("q1tI"),o=c("9mPY"),l=c("9kvl"),d=c("Wgwc"),u=c.n(d),b=c("uzmA"),j=c("NPPy"),m=c("LQih"),p=c("VsxY"),x=c("nKUr"),h="jUmT";function v(){var e=Object(l["e"])("@@initialState"),t=e.initialState,c=(e.loading,e.error,e.refresh,e.setInitialState,t),s=Object(l["d"])(),d=j,v=sessionStorage.getItem("topicid"),f=Object(i["useState"])(),O=Object(a["a"])(f,2),k=O[0],g=O[1],w=Object(i["useState"])(),y=Object(a["a"])(w,2),N=y[0],_=y[1],S=Object(i["useState"])(),C=Object(a["a"])(S,2),Y=(C[0],C[1],Object(i["useState"])()),I=Object(a["a"])(Y,2),T=I[0],D=I[1],M=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m["D"])({data:{topicid:v,regid:c.user.id}});case 3:t=e.sent,void 0!=t&&(n=t.result,console.log(n+" result result"),_(n)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["I"])({data:{topicid:v,regid:c.user.id}});case 2:t=e.sent,void 0!=t&&(n=t.result,g(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["w"])({data:{id:v,module:10}});case 2:t=e.sent,void 0!=t&&(c=t.result,D(c));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i["useEffect"])((()=>{M(),H(),z()}),[]);var J=function(){var e=Object(n["a"])(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=a){e.next=9;break}return e.next=3,Object(m["B"])({data:{regid:c.user.id,topicid:v,replyid:t}});case 3:return e.sent,e.next=6,Object(m["L"])({data:{id:v,replycount:n+1}});case 6:e.sent,e.next=15;break;case 9:return e.next=11,Object(m["L"])({data:{id:v,replycount:n-1}});case 11:return e.sent,e.next=14,Object(m["g"])({data:{regid:c.user.id,replyid:t,topicid:v}});case 14:e.sent;case 15:M();case 16:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),U=Object(i["useState"])(""),V=Object(a["a"])(U,2),A=V[0],E=V[1],L=function(){var e=Object(n["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==A.length){e.next=12;break}return e.prev=1,e.next=4,Object(m["G"])({data:{regid:c.user.id,topicid:v,replycontent:A,Uname:c.user.userName,img:c.user.wxHeadImage}});case 4:e.sent,E(""),z(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(n["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["H"])({data:{replyid:t}});case 2:e.sent,z();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x["jsxs"])("div",{className:"min-h-screen bg-white",_nk:"".concat(h,"11"),children:[Object(x["jsx"])(o["a"],{className:"sticky top-0 z-10",title:"\u8bdd\u9898\u5185\u5bb9",backTo:"/stuffVoice/user/home/union/uniontopic",_nk:"".concat(h,"21")}),Object(x["jsxs"])("div",{className:"bg-white min-h-screen max-w-full p-4",_nk:"".concat(h,"12"),children:[Object(x["jsxs"])("div",{className:"w-full flex",_nk:"".concat(h,"13"),children:[Object(x["jsx"])("div",{className:"flex w-1/5 justify-center",_nk:"".concat(h,"14"),children:Object(x["jsx"])("img",{className:"rounded-full h-14 w-14",src:null===N||void 0===N?void 0:N.img,alt:"\u5934\u50cf",_nk:"".concat(h,"31")})}),Object(x["jsxs"])("div",{className:"w-4/5 pl-2",_nk:"".concat(h,"15"),children:[Object(x["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(h,"16"),children:[Object(x["jsxs"])("div",{_nk:"".concat(h,"17"),children:[Object(x["jsx"])("div",{className:"font-bold text-sm",_nk:"".concat(h,"18"),children:null===N||void 0===N?void 0:N.name}),Object(x["jsx"])("div",{className:"text-sm",_nk:"".concat(h,"19"),children:null===N||void 0===N?void 0:N.department})]}),Object(x["jsxs"])("div",{_nk:"".concat(h,"1a"),children:[Object(x["jsx"])("p",{className:"text-gray-500",_nk:"".concat(h,"41"),children:u()(null===N||void 0===N?void 0:N.createdTime).format("YYYY-MM-DD")}),Object(x["jsxs"])("div",{className:"mt-1 flex justify-end items-center",_nk:"".concat(h,"1b"),children:[Object(x["jsx"])("img",{className:"rounded-full w-6 h-6 border border-white",src:null!==N&&void 0!==N&&N.isup?d["thumbsdown"]:d["thumbs"],alt:"\u70b9\u8d5e",onClick:()=>J(0,null===N||void 0===N?void 0:N.replynum,null===N||void 0===N?void 0:N.isup),_nk:"".concat(h,"32")}),Object(x["jsx"])("div",{className:"text-base text-gray-500 font-semibold",_nk:"".concat(h,"1c"),children:null===N||void 0===N?void 0:N.replynum})]})]})]}),Object(x["jsx"])("p",{className:"py-2 text-base my-2 text-gray-600",_nk:"".concat(h,"42"),children:null===N||void 0===N?void 0:N.topiccontent})]})]}),Object(x["jsx"])("div",{className:"grid grid-cols-3 gap-2 px-4",_nk:"".concat(h,"1d"),children:null===T||void 0===T?void 0:T.map(((e,t)=>Object(x["jsx"])(b["a"],{type:"bg",className:"h-24 w-full mx-auto",src:e.base64,alt:"",_nk:"".concat(h,"51")},t)))}),Object(x["jsx"])("div",{className:"mt-4",_nk:"".concat(h,"1e"),children:Object(x["jsx"])("div",{className:"space-y-4 flex-col bg-white",_nk:"".concat(h,"1f"),children:null===k||void 0===k?void 0:k.map(((e,t)=>Object(x["jsxs"])("div",{className:"bg-gray-100 flex ml-5 rounded-md shadow",_nk:"".concat(h,"1g"),children:[Object(x["jsx"])("div",{className:"flex-shrink-0 ml-3",_nk:"".concat(h,"1h"),children:Object(x["jsx"])("img",{className:"mt-2 rounded-full w-10 h-10",src:e.img,alt:"\u5934\u50cf",_nk:"".concat(h,"33")})}),Object(x["jsxs"])("div",{className:"w-full rounded-md pl-4 pt-2 pb-1 pr-1 leading-relaxed",_nk:"".concat(h,"1i"),children:[Object(x["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(h,"1j"),children:[Object(x["jsx"])("strong",{className:"text-base",_nk:"".concat(h,"61"),children:e.name}),Object(x["jsx"])("span",{className:"text-sm text-gray-400",_nk:"".concat(h,"71"),children:u()(e.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(x["jsxs"])("div",{_nk:"".concat(h,"1k"),children:[Object(x["jsx"])("p",{className:"text-base text-gray-500",_nk:"".concat(h,"43"),children:e.replycontent}),Object(x["jsx"])("div",{className:"mt-1 flex justify-end items-center",_nk:"".concat(h,"1l"),children:Object(x["jsx"])("button",{className:s.topicAdmin?"bg-blue-300  text-white text-base font-semibold rounded-full shadow hover:bg-indigo-600 px-4 py-1":"hidden",type:"submit",onClick:()=>{p["a"].confirm({title:"\u786e\u8ba4\u5220\u9664",onCancel:()=>{},onOk:()=>P(e.pid)})},_nk:"".concat(h,"81"),children:"\u5220\u9664"})})]})]})]},e.pid)))})}),Object(x["jsxs"])("div",{className:"w-full flex justify-center items-center bg-white sticky bottom-2 my-4",_nk:"".concat(h,"1m"),children:[Object(x["jsx"])("input",{className:"w-3/4 rounded-l-full shadow px-4 py-2 focus:outline-none border",type:"text",placeholder:"\u8bf4\u70b9\u4ec0\u4e48\u5427\uff01",value:A,onChange:e=>E(e.target.value),_nk:"".concat(h,"91")}),Object(x["jsx"])("button",{className:"w-1/4 bg-blue-600 text-white text-base font-semibold rounded-r-full shadow hover:bg-indigo-600 py-2",onClick:()=>L(),_nk:"".concat(h,"82"),children:"\u53d1\u8868"})]})]})]})}},uzmA:function(e,t,c){"use strict";var n=c("tJVT"),a=c("q1tI"),s=c("i8i4"),r=c.n(s),i=c("nKUr"),o="x4MR";function l(e){var t=Object(a["useState"])(!1),c=Object(n["a"])(t,2),s=c[0],l=c[1];return Object(a["useEffect"])((()=>{var t=document.createElement("div");s&&(r.a.render(Object(i["jsx"])("div",{onClick:()=>{l(!s),document.body.removeChild(t)},className:"".concat(s?"":"hidden"," z-50 top-0 left-0 fixed w-screen h-screen flex items-center justify-center bg-opacity-60 bg-gray-800"),_nk:"".concat(o,"11"),children:Object(i["jsx"])("img",{src:e.src,className:"w-auto h-auto",_nk:"".concat(o,"21")})}),t),document.body.appendChild(t))}),[s]),Object(i["jsxs"])(i["Fragment"],{children:["bg"===e.type&&Object(i["jsx"])("div",{className:"".concat(e.className?e.className:""," bg-cover bg-center cursor-pointer border"),style:{backgroundImage:"url(".concat(e.src,")")},onClick:()=>l(!0),_nk:"".concat(o,"12")}),(!e.type||"img"===e.type)&&Object(i["jsx"])("img",{src:e.src,className:"".concat(e.className?e.className:""," cursor-pointer border"),onClick:()=>l(!0),_nk:"".concat(o,"22")})]})}t["a"]=Object(a["memo"])(l)}}]);