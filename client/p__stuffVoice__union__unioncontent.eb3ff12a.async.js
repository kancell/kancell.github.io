(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[74],{"+7SR":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var c=n("9og8"),a=n("tJVT"),s=n("WmNS"),r=n.n(s),i=n("q1tI"),o=n("9mPY"),l=n("9kvl"),d=n("Wgwc"),u=n.n(d),m=n("uzmA"),b=n("NPPy"),j=n("LQih"),p=n("atPe"),x=n("VsxY"),v=n("8xVO"),h=n("nKUr"),f="jUmT";function O(){var e=Object(i["useState"])(!1),t=Object(a["a"])(e,2),n=t[0],s=t[1],d=Object(i["useState"])(0),O=Object(a["a"])(d,2),g=O[0],k=O[1],w=()=>s(!1),y=e=>{s(!0),k(e)},N=Object(l["e"])("@@initialState"),_=N.initialState,S=(N.loading,N.error,N.refresh,N.setInitialState,_),I=Object(l["d"])(),C=b,Y=sessionStorage.getItem("topicid"),M=Object(i["useState"])(),H=Object(a["a"])(M,2),P=H[0],E=H[1],J=Object(i["useState"])(),T=Object(a["a"])(J,2),V=T[0],z=T[1],D=Object(i["useState"])(),K=Object(a["a"])(D,2),U=K[0],A=K[1],B=Object(i["useState"])(),L=Object(a["a"])(B,2),q=(L[0],L[1],sessionStorage.getItem("topiclist"),Object(i["useState"])(1)),F=Object(a["a"])(q,2),G=F[0],R=F[1],W=Object(i["useState"])(1),Z=Object(a["a"])(W,2),Q=Z[0],X=Z[1],$=Object(i["useState"])(),ee=Object(a["a"])($,2),te=ee[0],ne=ee[1],ce=function(){var e=Object(c["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j["E"])({data:{topicid:Y,regid:S.user.id}});case 3:t=e.sent,void 0!=t&&(n=t.result,console.log(n+" result result"),z(n)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(c["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(j["J"])({data:{topicid:Y,regid:S.user.id}});case 2:t=e.sent,void 0!=t&&(n=t.result,E(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(c["a"])(r.a.mark((function e(){var t,n,c;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(j["w"])({data:{id:Y,module:10}});case 2:t=e.sent,void 0!=t&&(n=t.result,A(n),c=[],n.forEach((e=>{c.push(e.base64)})),ne(c));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i["useEffect"])((()=>{ce(),se(),ae()}),[]);var re=function(){var e=Object(c["a"])(r.a.mark((function e(t,n,c){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=c){e.next=7;break}return e.next=3,Object(j["M"])({data:{regid:S.user.id,topicid:Y,replyid:0,count:n+1}});case 3:e.sent,sessionStorage.setItem("topicup","1"),e.next=11;break;case 7:return e.next=9,Object(j["N"])({data:{regid:S.user.id,topicid:Y,replyid:0,count:n-1}});case 9:e.sent,sessionStorage.setItem("topicup","2");case 11:ce();case 12:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),ie=Object(i["useState"])(""),oe=Object(a["a"])(ie,2),le=oe[0],de=oe[1],ue=function(){var e=Object(c["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==le.length){e.next=19;break}return e.prev=1,e.next=4,Object(j["H"])({data:{regid:S.user.id,topicid:Y,replycontent:le,Uname:S.user.userName,img:S.user.wxHeadImage}});case 4:return e.sent,e.next=7,Object(j["O"])({data:{id:Y,replycount:(null===V||void 0===V?void 0:V.replynum)+1}});case 7:e.sent,de(""),R(G+1),ae(),ce(),console.log(G+"   addnum "),sessionStorage.setItem("replynumber",G.toString()),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(c["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(j["I"])({data:{replyid:t,topicid:Y}});case 2:e.sent,ae(),ce(),X(Q+1),sessionStorage.setItem("replynumberdelete",Q.toString());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h["jsxs"])("div",{className:"min-h-screen bg-white",_nk:"".concat(f,"11"),children:[Object(h["jsx"])(h["Fragment"],{children:te&&Object(h["jsx"])(p["a"],{visible:n,images:te,onClose:w,activeIndex:g,_nk:"".concat(f,"21")})}),Object(h["jsx"])(o["a"],{className:"sticky top-0 z-10",title:"\u8bdd\u9898\u5185\u5bb9",_nk:"".concat(f,"31")}),Object(h["jsxs"])("div",{className:"bg-white min-h-screen max-w-full p-4",_nk:"".concat(f,"12"),children:[Object(h["jsxs"])("div",{className:"w-full flex",_nk:"".concat(f,"13"),children:[Object(h["jsx"])("div",{className:"mx-2 w-8 h-8",_nk:"".concat(f,"14"),children:Object(h["jsx"])("img",{className:"rounded-full h-8 w-8",src:null!==V&&void 0!==V&&V.img?null===V||void 0===V?void 0:V.img:v["d"],alt:"\u5934\u50cf",_nk:"".concat(f,"41")})}),Object(h["jsx"])("div",{className:"w-4/5 pl-2",_nk:"".concat(f,"15"),children:Object(h["jsx"])("div",{className:"flex justify-between",_nk:"".concat(f,"16"),children:Object(h["jsxs"])("div",{_nk:"".concat(f,"17"),children:[Object(h["jsx"])("div",{className:"text-gray-400 text-sm",_nk:"".concat(f,"18"),children:null===V||void 0===V?void 0:V.name}),Object(h["jsx"])("div",{className:"text-gray-400 text-sm",_nk:"".concat(f,"19"),children:null===V||void 0===V?void 0:V.department})]})})})]}),Object(h["jsx"])("div",{_nk:"".concat(f,"1a"),children:Object(h["jsx"])("p",{className:"text-gray-700 font-normal text-base mt-2 ml-3 mr-2",_nk:"".concat(f,"51"),children:null===V||void 0===V?void 0:V.title})}),Object(h["jsx"])("div",{className:"grid grid-cols-3 gap-2 px-4",_nk:"".concat(f,"1b"),children:null===U||void 0===U?void 0:U.map(((e,t)=>Object(h["jsx"])("div",{onClick:()=>y(t),_nk:"".concat(f,"1c"),children:Object(h["jsx"])(m["a"],{type:"bg",preview:!1,className:"h-24 w-full mx-auto",src:e.base64,alt:"",_nk:"".concat(f,"61")})},t)))}),Object(h["jsxs"])("div",{className:"mt-2 ml-3",_nk:"".concat(f,"1d"),children:[Object(h["jsx"])("p",{className:"text-gray-700 font-normal text-base mt-2 mr-2",_nk:"".concat(f,"52"),children:null===V||void 0===V?void 0:V.topiccontent}),Object(h["jsx"])("p",{className:"text-xs font-normal mt-2 text-gray-400",_nk:"".concat(f,"53"),children:u()(null===V||void 0===V?void 0:V.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(h["jsxs"])("div",{className:"flex  mr-4 mt-2",_nk:"".concat(f,"1e"),children:[Object(h["jsx"])("img",{alt:"\u8bdd\u9898\u5ea6",className:"h-5 w-5 mt-2 ml-8 flex",src:C["hot"],_nk:"".concat(f,"42")}),Object(h["jsx"])("p",{className:"text-lg font-normal  ml-2",_nk:"".concat(f,"54"),children:null===V||void 0===V?void 0:V.replynum}),Object(h["jsx"])("img",{className:"rounded-full ml-20 w-8 h-8 ",src:null!==V&&void 0!==V&&V.isup?C["thumbsdown"]:C["thumbs"],alt:"\u70b9\u8d5e",onClick:()=>re(null===V||void 0===V?void 0:V.pid,null===V||void 0===V?void 0:V.hotnum,null===V||void 0===V?void 0:V.isup),_nk:"".concat(f,"43")}),Object(h["jsx"])("p",{className:"text-lg font-normal ml-1 mb-2",_nk:"".concat(f,"55"),children:null===V||void 0===V?void 0:V.hotnum})]}),Object(h["jsx"])("div",{className:"mt-4",_nk:"".concat(f,"1f"),children:Object(h["jsx"])("div",{className:"space-y-4 flex-col bg-white",_nk:"".concat(f,"1g"),children:null===P||void 0===P?void 0:P.map(((e,t)=>Object(h["jsxs"])("div",{className:"bg-gray-100 flex ml-5 rounded-md shadow",_nk:"".concat(f,"1h"),children:[Object(h["jsx"])("div",{className:"flex-shrink-0 ml-3",_nk:"".concat(f,"1i"),children:Object(h["jsx"])("img",{className:"mt-2 rounded-full w-10 h-10",src:e.img?e.img:v["d"],alt:"\u5934\u50cf",_nk:"".concat(f,"44")})}),Object(h["jsxs"])("div",{className:"w-full rounded-md pl-4 pt-2 pb-1 pr-1 leading-relaxed",_nk:"".concat(f,"1j"),children:[Object(h["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(f,"1k"),children:[Object(h["jsx"])("strong",{className:"text-base",_nk:"".concat(f,"71"),children:e.name}),Object(h["jsx"])("span",{className:"text-sm text-gray-400",_nk:"".concat(f,"81"),children:u()(e.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(h["jsxs"])("div",{_nk:"".concat(f,"1l"),children:[Object(h["jsx"])("p",{className:"text-base text-gray-500",_nk:"".concat(f,"56"),children:e.replycontent}),Object(h["jsx"])("div",{className:" flex justify-end items-center",_nk:"".concat(f,"1m"),children:Object(h["jsx"])("button",{className:I.topicAdmin?"bg-blue-300  text-white text-base font-semibold rounded-full shadow hover:bg-indigo-600 px-2 py-1":"hidden",type:"submit",onClick:()=>{x["a"].confirm({title:"\u786e\u8ba4\u5220\u9664",onCancel:()=>{},onOk:()=>me(e.pid)})},_nk:"".concat(f,"91"),children:"\u5220\u9664"})})]})]})]},e.pid)))})}),Object(h["jsxs"])("div",{className:"w-full flex justify-center items-center bg-white sticky bottom-2 my-4",_nk:"".concat(f,"1n"),children:[Object(h["jsx"])("input",{className:"w-3/4 rounded-l-full shadow px-4 py-2 focus:outline-none border",type:"text",placeholder:"\u8bf4\u70b9\u4ec0\u4e48\u5427\uff01",value:le,onChange:e=>de(e.target.value),_nk:"".concat(f,"a1")}),Object(h["jsx"])("button",{className:"w-1/4 bg-blue-600 text-white text-base font-semibold rounded-r-full shadow hover:bg-indigo-600 py-2",onClick:()=>ue(),_nk:"".concat(f,"92"),children:"\u8bc4\u8bba"})]})]})]})}},"+Med":function(e,t,n){e.exports=n.p+"static/banner3.f8643f35.jpg"},"73G7":function(e,t,n){e.exports=n.p+"static/banner2.5795a5d0.png"},"8xVO":function(e,t,n){"use strict";n("ryPu");var c=n("73G7"),a=n.n(c);n.d(t,"a",(function(){return a.a}));var s=n("+Med"),r=n.n(s);n.d(t,"b",(function(){return r.a}));var i=n("BKbo"),o=n.n(i);n.d(t,"d",(function(){return o.a}));var l=n("oLrZ"),d=n.n(l);n.d(t,"c",(function(){return d.a}))},BKbo:function(e,t,n){e.exports=n.p+"static/header.af01ecf4.png"},oLrZ:function(e,t,n){e.exports=n.p+"static/formBg.5b3fe558.png"},ryPu:function(e,t,n){e.exports=n.p+"static/banner1.f197b063.png"},uzmA:function(e,t,n){"use strict";var c=n("tJVT"),a=n("q1tI"),s=n("i8i4"),r=n.n(s),i=n("nKUr"),o="x4MR";function l(e){var t=e.src,n=e.className,s=(e.alt,e.type),l=void 0===e.preview,d=Object(a["useState"])(!1),u=Object(c["a"])(d,2),m=u[0],b=u[1];return Object(a["useEffect"])((()=>{var e=document.createElement("div");m&&(r.a.render(Object(i["jsx"])("div",{onClick:()=>{b(!m),document.body.removeChild(e)},className:"".concat(m?"":"hidden"," z-50 top-0 left-0 fixed w-screen h-screen flex items-center justify-center bg-opacity-60 bg-gray-800"),_nk:"".concat(o,"11"),children:Object(i["jsx"])("img",{src:t,className:"w-auto h-auto",_nk:"".concat(o,"21")})}),e),document.body.appendChild(e))}),[m]),Object(i["jsxs"])(i["Fragment"],{children:["bg"===s&&Object(i["jsx"])("div",{className:"".concat(n||""," bg-cover bg-center cursor-pointer border"),style:{backgroundImage:"url(".concat(t,")")},onClick:()=>l&&b(!0),_nk:"".concat(o,"12")}),(!s||"img"===s)&&Object(i["jsx"])("img",{src:t,className:"".concat(n||""," cursor-pointer border"),onClick:()=>l&&b(!0),_nk:"".concat(o,"22")})]})}t["a"]=Object(a["memo"])(l)}}]);