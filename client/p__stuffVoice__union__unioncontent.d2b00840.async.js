(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[74],{"+7SR":function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return v}));var n=c("9og8"),a=c("tJVT"),s=c("WmNS"),r=c.n(s),i=c("q1tI"),l=c("9mPY"),o=c("9kvl"),d=c("Wgwc"),u=c.n(d),m=c("uzmA"),j=c("NPPy"),b=c("LQih"),x=c("VsxY"),p=c("nKUr"),h="jUmT";function v(){var e=Object(o["e"])("@@initialState"),t=e.initialState,c=(e.loading,e.error,e.refresh,e.setInitialState,t),s=Object(o["d"])(),d=j,v=sessionStorage.getItem("topicid"),f=Object(i["useState"])(),O=Object(a["a"])(f,2),k=O[0],g=O[1],w=Object(i["useState"])(),N=Object(a["a"])(w,2),y=N[0],_=N[1],S=Object(i["useState"])(),C=Object(a["a"])(S,2),Y=C[0],I=C[1],H=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b["D"])({data:{topicid:v,regid:c.user.id}});case 3:t=e.sent,void 0!=t&&(n=t.result,console.log(n+" result result"),_(n)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["I"])({data:{topicid:v,regid:c.user.id}});case 2:t=e.sent,void 0!=t&&(n=t.result,g(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["w"])({data:{id:v,module:10}});case 2:t=e.sent,void 0!=t&&(c=t.result,I(c));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i["useEffect"])((()=>{H(),D(),M()}),[]);var T=function(){var e=Object(n["a"])(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=a){e.next=6;break}return e.next=3,Object(b["L"])({data:{regid:c.user.id,topicid:v,replyid:0,count:n+1}});case 3:e.sent,e.next=9;break;case 6:return e.next=8,Object(b["M"])({data:{regid:c.user.id,topicid:v,replyid:0,count:n-1}});case 8:e.sent;case 9:H();case 10:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}(),z=Object(i["useState"])(""),J=Object(a["a"])(z,2),U=J[0],A=J[1],E=function(){var e=Object(n["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==U.length){e.next=16;break}return e.prev=1,e.next=4,Object(b["G"])({data:{regid:c.user.id,topicid:v,replycontent:U,Uname:c.user.userName,img:c.user.wxHeadImage}});case 4:return e.sent,e.next=7,Object(b["N"])({data:{id:v,replycount:(null===y||void 0===y?void 0:y.replynum)+1}});case 7:e.sent,A(""),M(),H(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(n["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["H"])({data:{replyid:t,topicid:v}});case 2:e.sent,M(),H();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p["jsxs"])("div",{className:"min-h-screen bg-white",_nk:"".concat(h,"11"),children:[Object(p["jsx"])(l["a"],{className:"sticky top-0 z-10",title:"\u8bdd\u9898\u5185\u5bb9",_nk:"".concat(h,"21")}),Object(p["jsxs"])("div",{className:"bg-white min-h-screen max-w-full p-4",_nk:"".concat(h,"12"),children:[Object(p["jsxs"])("div",{className:"w-full flex",_nk:"".concat(h,"13"),children:[Object(p["jsx"])("div",{className:"mx-2 w-8 h-8",_nk:"".concat(h,"14"),children:Object(p["jsx"])("img",{className:"rounded-full h-8 w-8",src:null===y||void 0===y?void 0:y.img,alt:"\u5934\u50cf",_nk:"".concat(h,"31")})}),Object(p["jsx"])("div",{className:"w-4/5 pl-2",_nk:"".concat(h,"15"),children:Object(p["jsx"])("div",{className:"flex justify-between",_nk:"".concat(h,"16"),children:Object(p["jsxs"])("div",{_nk:"".concat(h,"17"),children:[Object(p["jsx"])("div",{className:"text-gray-400 text-sm",_nk:"".concat(h,"18"),children:null===y||void 0===y?void 0:y.name}),Object(p["jsx"])("div",{className:"text-gray-400 text-sm",_nk:"".concat(h,"19"),children:null===y||void 0===y?void 0:y.department})]})})})]}),Object(p["jsx"])("div",{_nk:"".concat(h,"1a"),children:Object(p["jsx"])("p",{className:"text-gray-700 font-normal text-base mt-2 ml-3 mr-2",_nk:"".concat(h,"41"),children:null===y||void 0===y?void 0:y.title})}),Object(p["jsx"])("div",{className:"grid grid-cols-3 gap-2 px-4",_nk:"".concat(h,"1b"),children:null===Y||void 0===Y?void 0:Y.map(((e,t)=>Object(p["jsx"])(m["a"],{type:"bg",className:"h-24 w-full mx-auto",src:e.base64,alt:"",_nk:"".concat(h,"51")},t)))}),Object(p["jsxs"])("div",{className:"mt-2 ml-3",_nk:"".concat(h,"1c"),children:[Object(p["jsx"])("p",{className:"text-gray-700 font-normal text-xs mt-2 mr-2",_nk:"".concat(h,"42"),children:null===y||void 0===y?void 0:y.topiccontent}),Object(p["jsx"])("p",{className:"text-xs font-normal mt-2 text-gray-400",_nk:"".concat(h,"43"),children:u()(null===y||void 0===y?void 0:y.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(p["jsxs"])("div",{className:"flex  mr-4 mt-2",_nk:"".concat(h,"1d"),children:[Object(p["jsx"])("img",{alt:"\u8bdd\u9898\u5ea6",className:"h-5 w-5 mt-2 ml-8 flex",src:d["hot"],_nk:"".concat(h,"32")}),Object(p["jsx"])("p",{className:"text-lg font-normal  ml-2",_nk:"".concat(h,"44"),children:null===y||void 0===y?void 0:y.replynum}),Object(p["jsx"])("img",{className:"rounded-full ml-20 w-8 h-8 ",src:null!==y&&void 0!==y&&y.isup?d["thumbsdown"]:d["thumbs"],alt:"\u70b9\u8d5e",onClick:()=>T(null===y||void 0===y?void 0:y.pid,null===y||void 0===y?void 0:y.hotnum,null===y||void 0===y?void 0:y.isup),_nk:"".concat(h,"33")}),Object(p["jsx"])("p",{className:"text-lg font-normal ml-1 mb-2",_nk:"".concat(h,"45"),children:null===y||void 0===y?void 0:y.hotnum})]}),Object(p["jsx"])("div",{className:"mt-4",_nk:"".concat(h,"1e"),children:Object(p["jsx"])("div",{className:"space-y-4 flex-col bg-white",_nk:"".concat(h,"1f"),children:null===k||void 0===k?void 0:k.map(((e,t)=>Object(p["jsxs"])("div",{className:"bg-gray-100 flex ml-5 rounded-md shadow",_nk:"".concat(h,"1g"),children:[Object(p["jsx"])("div",{className:"flex-shrink-0 ml-3",_nk:"".concat(h,"1h"),children:Object(p["jsx"])("img",{className:"mt-2 rounded-full w-10 h-10",src:e.img,alt:"\u5934\u50cf",_nk:"".concat(h,"34")})}),Object(p["jsxs"])("div",{className:"w-full rounded-md pl-4 pt-2 pb-1 pr-1 leading-relaxed",_nk:"".concat(h,"1i"),children:[Object(p["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(h,"1j"),children:[Object(p["jsx"])("strong",{className:"text-base",_nk:"".concat(h,"61"),children:e.name}),Object(p["jsx"])("span",{className:"text-sm text-gray-400",_nk:"".concat(h,"71"),children:u()(e.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(p["jsxs"])("div",{_nk:"".concat(h,"1k"),children:[Object(p["jsx"])("p",{className:"text-base text-gray-500",_nk:"".concat(h,"46"),children:e.replycontent}),Object(p["jsx"])("div",{className:" flex justify-end items-center",_nk:"".concat(h,"1l"),children:Object(p["jsx"])("button",{className:s.topicAdmin?"bg-blue-300  text-white text-base font-semibold rounded-full shadow hover:bg-indigo-600 px-2 py-1":"hidden",type:"submit",onClick:()=>{x["a"].confirm({title:"\u786e\u8ba4\u5220\u9664",onCancel:()=>{},onOk:()=>P(e.pid)})},_nk:"".concat(h,"81"),children:"\u5220\u9664"})})]})]})]},e.pid)))})}),Object(p["jsxs"])("div",{className:"w-full flex justify-center items-center bg-white sticky bottom-2 my-4",_nk:"".concat(h,"1m"),children:[Object(p["jsx"])("input",{className:"w-3/4 rounded-l-full shadow px-4 py-2 focus:outline-none border",type:"text",placeholder:"\u8bf4\u70b9\u4ec0\u4e48\u5427\uff01",value:U,onChange:e=>A(e.target.value),_nk:"".concat(h,"91")}),Object(p["jsx"])("button",{className:"w-1/4 bg-blue-600 text-white text-base font-semibold rounded-r-full shadow hover:bg-indigo-600 py-2",onClick:()=>E(),_nk:"".concat(h,"82"),children:"\u53d1\u8868"})]})]})]})}},uzmA:function(e,t,c){"use strict";var n=c("tJVT"),a=c("q1tI"),s=c("i8i4"),r=c.n(s),i=c("nKUr"),l="x4MR";function o(e){var t=Object(a["useState"])(!1),c=Object(n["a"])(t,2),s=c[0],o=c[1];return Object(a["useEffect"])((()=>{var t=document.createElement("div");s&&(r.a.render(Object(i["jsx"])("div",{onClick:()=>{o(!s),document.body.removeChild(t)},className:"".concat(s?"":"hidden"," z-50 top-0 left-0 fixed w-screen h-screen flex items-center justify-center bg-opacity-60 bg-gray-800"),_nk:"".concat(l,"11"),children:Object(i["jsx"])("img",{src:e.src,className:"w-auto h-auto",_nk:"".concat(l,"21")})}),t),document.body.appendChild(t))}),[s]),Object(i["jsxs"])(i["Fragment"],{children:["bg"===e.type&&Object(i["jsx"])("div",{className:"".concat(e.className?e.className:""," bg-cover bg-center cursor-pointer border"),style:{backgroundImage:"url(".concat(e.src,")")},onClick:()=>o(!0),_nk:"".concat(l,"12")}),(!e.type||"img"===e.type)&&Object(i["jsx"])("img",{src:e.src,className:"".concat(e.className?e.className:""," cursor-pointer border"),onClick:()=>o(!0),_nk:"".concat(l,"22")})]})}t["a"]=Object(a["memo"])(o)}}]);