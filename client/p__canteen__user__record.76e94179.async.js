(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[53],{"/rzS":function(e,t,c){"use strict";c.r(t);var n=c("k1fw"),a=c("tJVT"),r=c("9og8"),s=c("WmNS"),o=c.n(s),i=c("9mPY"),l=c("q1tI"),d=c("8xVO"),x=c("uzmA"),u=c("9kvl"),b=c("PCcL"),j=c("a2t3"),m=c("pf/J"),p=c("VsxY"),h=c("nKUr"),v="tvNk",k=()=>{var e=Object(u["e"])("@@initialState"),t=e.initialState,c=Object(u["e"])("useWeChat"),s=c.wxPayAwake,k=t,f=k.user,O=Object(h["jsxs"])("div",{className:"flex items-center m-4 p-4 rounded-lg bg-white",_nk:"".concat(v,"11"),children:[Object(h["jsx"])("div",{className:"shadow-lg rounded-full h-14 w-14",_nk:"".concat(v,"12"),children:Object(h["jsx"])("img",{src:null!==f&&void 0!==f&&f.wxHeadImage?null===f||void 0===f?void 0:f.wxHeadImage:d["d"],className:"rounded-full align-middle border-none h-14 w-14",_nk:"".concat(v,"21")})}),Object(h["jsxs"])("div",{className:"pl-4",_nk:"".concat(v,"13"),children:[Object(h["jsx"])("p",{className:"text-lg font-medium",_nk:"".concat(v,"31"),children:null!==f&&void 0!==f&&f.userName?null===f||void 0===f?void 0:f.userName:"\u672a\u767b\u5f55"}),Object(h["jsx"])("p",{className:"text-sm font-medium",_nk:"".concat(v,"32"),children:null!==f&&void 0!==f&&f.deptName?null===f||void 0===f?void 0:f.deptName:""}),Object(h["jsxs"])("p",{className:"text-sm text-gray-500 flex items-center",_nk:"".concat(v,"33"),children:[Object(h["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(v,"41"),children:Object(h["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z",_nk:"".concat(v,"51")})}),Object(h["jsx"])("span",{_nk:"".concat(v,"61"),children:null!==f&&void 0!==f&&f.phoneNumber?null===f||void 0===f?void 0:f.phoneNumber:""})]})]})]}),w=function(){var e=Object(r["a"])(o.a.mark((function e(t){var c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["p"])({params:{pid:t}});case 2:c=e.sent,c&&c.status?(s(c.result),F()):m["a"].show("\u7f51\u7edc\u6216\u670d\u52a1\u5668\u5f02\u5e38");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(r["a"])(o.a.mark((function e(t){var c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["r"])({data:{pid:t}});case 2:c=e.sent,c&&c.status&&(m["a"].show(c.message),F());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(r["a"])(o.a.mark((function e(t){var c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["c"])({params:{pid:t}});case 2:c=e.sent,c&&c.status&&(m["a"].show(c.message),F());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(l["useState"])(!1),_=Object(a["a"])(y,2),C=_[0],P=_[1],L=Object(l["useState"])(),S=Object(a["a"])(L,2),V=S[0],z=S[1],B=e=>{P(!0),z({pid:e})},I=C&&V&&Object(h["jsxs"])("div",{_nk:"".concat(v,"14"),children:[Object(h["jsx"])("div",{onClick:()=>P(!1),className:"fixed left-0 top-0 bg-opacity-60 bg-gray-800 w-screen h-screen z-40",_nk:"".concat(v,"15")}),Object(h["jsxs"])("div",{className:"w-4/5 px-6 pt-6 shadow rounded bg-white fixed top-1/2 transform -translate-y-1/2 left-1/2 -translate-x-1/2 z-50",_nk:"".concat(v,"16"),children:[Object(h["jsx"])("div",{className:"text-lg text-center",_nk:"".concat(v,"17"),children:"\u786e\u8ba4\u8981\u53d6\u6d88\u8ba2\u5355\u5e76\u9000\u6b3e\u5417\uff1f"}),Object(h["jsxs"])("div",{className:"mt-4",_nk:"".concat(v,"18"),children:[Object(h["jsx"])("div",{className:"flex justify-between",_nk:"".concat(v,"19"),children:Object(h["jsx"])("label",{className:"block mb-1 text-sm font-medium text-gray-600",_nk:"".concat(v,"71"),children:"\u9000\u6b3e\u539f\u56e0"})}),Object(h["jsx"])("input",{value:V.reason||"",onChange:e=>z(Object(n["a"])(Object(n["a"])({},V),{},{reason:e.target.value})),className:"block w-full px-4 py-1.5 text-gray-700 bg-white border border-gray-300 rounded",_nk:"".concat(v,"81")})]}),Object(h["jsxs"])("div",{className:"flex mt-5 text-base divide-x border-t border-gray-100 -mx-6",_nk:"".concat(v,"1a"),children:[Object(h["jsx"])("div",{onClick:()=>P(!1),className:"flex-1 text-center py-3",_nk:"".concat(v,"1b"),children:"\u53d6\u6d88"}),Object(h["jsx"])("div",{onClick:Object(r["a"])(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(V.pid){e.next=2;break}return e.abrupt("return");case 2:if(V.reason){e.next=5;break}return m["a"].show("\u8bf7\u586b\u5199\u9000\u6b3e\u539f\u56e0"),e.abrupt("return");case 5:return e.prev=5,e.next=8,Object(b["t"])({data:V});case 8:t=e.sent,t&&t.status&&(m["a"].show(t.message),F(),P(!1)),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])}))),className:"flex-1 text-center py-3 text-blue-400",_nk:"".concat(v,"1c"),children:"\u786e\u5b9a"})]})]})]}),M=Object(l["useState"])([]),A=Object(a["a"])(M,2),G=A[0],W=A[1],F=function(){var e=Object(r["a"])(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b["o"])({});case 3:t=e.sent,t&&t.status&&W(t.result.orderList),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=(e,t)=>{var c={receivingGood:!1,refundPay:!1,cancelOrder:!1,goPay:!1};switch(e){case"\u5f85\u652f\u4ed8":case"\u63d0\u4ea4\u6210\u529f":c.goPay=!0,c.cancelOrder=!0;break;case"\u4ed8\u6b3e\u6210\u529f":c.refundPay=!0;break;case"\u5df2\u5b8c\u6210":c.refundPay=!0;break;case"\u5f85\u6536\u8d27":c.receivingGood=!0;break;case"\u5f85\u53d1\u8d27":c.refundPay=!0;break;case"\u7528\u6237\u53d6\u6d88":case"\u8d85\u65f6\u81ea\u52a8\u53d6\u6d88":case"\u9000\u6b3e\u6210\u529f":case"\u9000\u6b3e\u5f02\u5e38":case"\u9000\u6b3e\u4e2d":case"\u652f\u4ed8\u72b6\u6001\u5f02\u5e38":break;default:break}return Object(h["jsxs"])(h["Fragment"],{children:[c.receivingGood&&Object(h["jsx"])("div",{onClick:()=>{p["a"].confirm({title:"\u786e\u8ba4\u8d27\u7269\u5df2\u7ecf\u6536\u5230\u4e86\u5417",onCancel:()=>{},onOk:()=>g(t)})},className:"rounded border border-red-500 text-red-500 py-1 px-2 my-2 mx-1 text-xs",_nk:"".concat(v,"1d"),children:"\u786e\u8ba4\u6536\u8d27"}),c.goPay&&Object(h["jsx"])("div",{onClick:()=>w(t),className:"rounded border border-red-500 text-red-500 py-1 px-2 my-2 mx-1 text-xs",_nk:"".concat(v,"1e"),children:"\u524d\u5f80\u652f\u4ed8"}),c.cancelOrder&&Object(h["jsx"])("div",{onClick:()=>{p["a"].confirm({title:"\u786e\u8ba4\u8981\u53d6\u6d88\u8ba2\u5355\u5417",onCancel:()=>{},onOk:()=>N(t)})},className:"rounded border border-red-500 text-red-500 py-1 px-2 my-2 mx-1 text-xs",_nk:"".concat(v,"1f"),children:"\u53d6\u6d88\u8ba2\u5355"}),c.refundPay&&Object(h["jsx"])("div",{onClick:()=>B(t),className:"rounded border border-red-500 text-red-500 py-1 px-2 my-2 mx-1 text-xs",_nk:"".concat(v,"1g"),children:"\u7533\u8bf7\u9000\u6b3e"})]})},J=G&&G.length>0?G.map(((e,t)=>Object(h["jsxs"])("div",{className:"my-2 px-3 py-2 bg-white",onClick:()=>{u["a"].push("/canteen/user/recordDetail/".concat(e.pid))},_nk:"iAr".concat(v,"1h"),children:[Object(h["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(v,"1i"),children:[Object(h["jsxs"])("div",{_nk:"".concat(v,"1j"),children:[Object(h["jsx"])("div",{className:"text-lg",_nk:"".concat(v,"1k"),children:e.canteenName}),Object(h["jsxs"])("div",{className:"text-xs text-gray-400",_nk:"".concat(v,"1l"),children:["\u8ba2\u5355\u53f7\uff1a",e.pid]})]}),Object(h["jsx"])("div",{className:"text-red-600 text-sm",_nk:"".concat(v,"1m"),children:e.orderStatus})]}),Object(h["jsx"])("div",{className:"flex flex-1 overflow-x-auto pt-2 -mx-1",_nk:"".concat(v,"1n"),children:e.orderItemList.map(((e,t)=>{var c,n;return Object(h["jsxs"])("div",{className:"flex flex-col mx-1 flex-shrink-0",_nk:"iAr".concat(v,"1o"),children:[Object(h["jsx"])("div",{className:"px-0.5 shadow-xs",_nk:"".concat(v,"1p"),children:Object(h["jsx"])(x["a"],{fit:"contain",src:null===(c=e.picList)||void 0===c||null===(n=c[0])||void 0===n?void 0:n.base64,className:"h-14 w-14 mx-auto rounded",_nk:"".concat(v,"91")})}),Object(h["jsx"])("div",{className:"text-gray-500 pt-1 pl-1 text-sm",_nk:"".concat(v,"1q"),children:e.goodsName})]},e.goodsName)}))}),Object(h["jsxs"])("div",{className:"border-t border-b -mx-2 mt-2 px-2 py-0.5 text-right border-gray-100",_nk:"".concat(v,"1r"),children:[Object(h["jsx"])("span",{className:"text-sm",_nk:"".concat(v,"62"),children:"\u91d1\u989d\uff1a\uffe5"}),Object(h["jsx"])("span",{className:"text-xl",_nk:"".concat(v,"63"),children:e.totalPrice})]}),Object(h["jsx"])("div",{onClick:e=>e.stopPropagation(),className:"flex flex-row-reverse items-center -mb-2",_nk:"".concat(v,"1s"),children:H(e.orderStatus,e.pid)})]},e.pid))):Object(h["jsx"])("div",{className:"flex flex-col ml-1 items-center justify-center h-20 w-full overflow-x-auto bg-white mt-2 rounded text-gray-500 font-semibold",_nk:"".concat(v,"1t"),children:"\u6682\u65e0\u8ba2\u5355\u4fe1\u606f"});return Object(l["useEffect"])((()=>{F()}),[]),Object(h["jsxs"])(h["Fragment"],{children:[I,Object(h["jsxs"])("div",{className:"min-h-screen",_nk:"".concat(v,"1u"),children:[Object(h["jsx"])("div",{className:"sticky top-0 z-10",_nk:"".concat(v,"1v"),children:Object(h["jsx"])(i["a"],{title:"\u98df\u5802\u8ba2\u9910",className:"bg-yellow-300",_nk:"".concat(v,"a1")})}),Object(h["jsx"])("div",{className:"bg-gradient-to-b py-1 from-yellow-300 via-yellow-200 to-white rounded-b-lg",_nk:"".concat(v,"110"),children:O}),Object(h["jsx"])("div",{_nk:"".concat(v,"111"),children:J}),Object(h["jsx"])("div",{className:"h-24",_nk:"".concat(v,"112")})]}),Object(h["jsx"])(j["a"],{_nk:"".concat(v,"b1")})]})};t["default"]=k},"73G7":function(e,t,c){e.exports=c.p+"static/banner2.5795a5d0.png"},"8xVO":function(e,t,c){"use strict";c("ryPu");var n=c("73G7"),a=c.n(n);c.d(t,"a",(function(){return a.a}));var r=c("d0yd"),s=c.n(r);c.d(t,"b",(function(){return s.a}));var o=c("BKbo"),i=c.n(o);c.d(t,"d",(function(){return i.a}));var l=c("oLrZ"),d=c.n(l);c.d(t,"c",(function(){return d.a}))},BKbo:function(e,t,c){e.exports=c.p+"static/header.0be6eb6a.png"},a2t3:function(e,t,c){"use strict";var n=c("q1tI"),a=c("Ty5D"),r=c("55Ip"),s=c("nKUr"),o="bsUF",i=()=>{var e=Object(a["g"])(),t={text:"\u6211\u7684\u98df\u5802",path:"/canteen/user/home",select:e.pathname.includes("/canteen/user/home"),icon:Object(s["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mt-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(o,"11"),children:Object(s["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",_nk:"".concat(o,"21")})})},c={text:"\u6211\u7684\u9884\u5b9a",path:"/canteen/user/record",select:e.pathname.includes("/canteen/user/record"),icon:Object(s["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mt-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(o,"12"),children:Object(s["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",_nk:"".concat(o,"22")})})},n=[t,c],i=n.map(((e,t)=>Object(s["jsxs"])(r["a"],{replace:!0,to:e.path,className:"flex flex-col items-center cursor-pointer flex-1 ".concat(e.select?"text-yellow-500":""),_nk:"iAr".concat(o,"31"),children:[e.icon,Object(s["jsx"])("div",{className:"text-center my-0.5",_nk:"".concat(o,"41"),children:e.text})]},t)));return Object(s["jsx"])(s["Fragment"],{children:Object(s["jsx"])("div",{className:"sticky bottom-0 shadow w-screen border-t",_nk:"".concat(o,"42"),children:Object(s["jsx"])("div",{className:"flex justify-between items-center px-2 bg-white w-full max-w-lg border-b-2",_nk:"".concat(o,"43"),children:i})})})};t["a"]=Object(n["memo"])(i)},d0yd:function(e,t,c){e.exports=c.p+"static/foodBanner.06733e7f.jpg"},oLrZ:function(e,t,c){e.exports=c.p+"static/formBg.eb909ae4.png"},ryPu:function(e,t,c){e.exports=c.p+"static/banner1.f197b063.png"}}]);