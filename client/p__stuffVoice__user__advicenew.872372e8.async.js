(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{"N+uz":function(e,t,c){"use strict";c.d(t,"a",(function(){return l}));var n=c("k1fw"),a=c("9og8"),s=c("WmNS"),r=c.n(s),o=c("9kvl");function l(e){return i.apply(this,arguments)}function i(){return i=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["c"])("/pic/upload/upload-pic-group",Object(n["a"])({requestType:"form",method:"POST"},t||{})));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}},"XqT+":function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return f}));var n=c("9og8"),a=c("tJVT"),s=c("WmNS"),r=c.n(s),o=c("9mPY"),l=c("q1tI"),i=c("9kvl"),u=c("LQih"),d=c("uk8H"),b=c.n(d),j=c("pf/J"),h=c("+DKU"),p=c("N+uz"),x=c("nKUr"),m="UYCY";function f(){var e=Object(i["e"])("@@initialState"),t=e.initialState,c=(e.loading,e.error,e.refresh,e.setInitialState,t),s=c.user.id,d=Object(l["useState"])(),f=Object(a["a"])(d,2),k=f[0],v=f[1],g=Object(l["useState"])(),O=Object(a["a"])(g,2),w=O[0],_=O[1],y=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["l"])({data:{userid:s}});case 3:t=e.sent,void 0!=t&&(c=t.result,v(c)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,c,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["w"])();case 3:t=e.sent,void 0!=t&&(n=null===(c=t.result)||void 0===c?void 0:c.info,_(n)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=Object(l["useState"])(""),I=Object(a["a"])(S,2),C=I[0],L=(I[1],Object(l["useState"])("")),z=Object(a["a"])(L,2),H=z[0],T=z[1],W=Object(l["useState"])(""),D=Object(a["a"])(W,2),J=D[0],q=(D[1],Object(l["useState"])("")),A=Object(a["a"])(q,2),B=A[0],M=A[1],U=Object(l["useState"])(["0"]),Y=Object(a["a"])(U,2),E=Y[0],K=(Y[1],Object(l["useState"])([])),P=Object(a["a"])(K,2),Q=P[0],V=P[1],F=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,c,n,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["z"])({data:{userid:s,type:C,title:H,topart:J,content:B,pic:E}});case 3:return t=e.sent,c=t.status,e.next=7,Object(u["Q"])({data:{userid:s,advicesCount:null===k||void 0===k?void 0:k.advicesCount}});case 7:n=e.sent,a=n.status,1==c&&1==a&&history.go(-1),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(l["useEffect"])((()=>{y(),N()}),[]),Object(l["useEffect"])((()=>{}),[k,C,H,J,B,w]);var G=function(){var e=Object(n["a"])(r.a.mark((function e(t){var c,n,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return j["a"].show("\u4e0a\u4f20\u56fe\u7247\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"),e.prev=1,c=new FormData,c.append("file",t.file),console.log(c),e.next=7,Object(p["a"])({data:c});case 7:n=e.sent,n&&n.status&&(j["a"].show("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),"0"==E[0]?E[0]=n.result.IDInfoList[0].ImageId:E.push(n.result.IDInfoList[0].ImageId),a=Q.concat(t),console.log(E),V(a)),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](1);case 13:console.log(t);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),X=e=>{var t=[...Q];t.splice(e,1),E.splice(e,1),console.log(E+"    deleteImg "),V(t)};return Object(x["jsxs"])("div",{className:"min-h-screen bg-white",_nk:"".concat(m,"11"),children:[Object(x["jsx"])(o["a"],{className:"sticky top-0 z-10",title:"\u63d0\u51fa\u65b0\u5efa\u8bae",_nk:"".concat(m,"21")}),Object(x["jsxs"])("div",{className:"flex flex-col mx-4 my-2",_nk:"".concat(m,"12"),children:[Object(x["jsxs"])("div",{className:"h-32 w-full bg-cover bg-no-repeat bg-center rounded-lg flex justify-center items-center shadow",style:{backgroundImage:"url('".concat(b.a,"')")},_nk:"".concat(m,"13"),children:[Object(x["jsx"])("div",{className:"h-32 w-2/5 flex justify-center items-center mx-4",_nk:"".concat(m,"14"),children:Object(x["jsx"])("img",{className:"h-20 w-20 rounded-full",src:null===k||void 0===k?void 0:k.img,alt:"\u5934\u50cf",_nk:"".concat(m,"31")})}),Object(x["jsxs"])("div",{className:"h-32 mx-2 w-3/5 flex flex-col justify-center",_nk:"".concat(m,"15"),children:[Object(x["jsx"])("p",{className:"text-white font-semibold text-xl mb-2",_nk:"".concat(m,"41"),children:null===k||void 0===k?void 0:k.name}),Object(x["jsx"])("p",{className:"text-white text-base",_nk:"".concat(m,"42"),children:null===k||void 0===k?void 0:k.partment})]})]}),Object(x["jsxs"])("div",{className:"form space-y-4 mt-5",_nk:"".concat(m,"16"),children:[Object(x["jsxs"])("div",{className:"flex flex-col items-center",_nk:"".concat(m,"17"),children:[Object(x["jsx"])("div",{className:"text-xl font-semibold text-black",_nk:"".concat(m,"18"),children:"\u6211\u7684\u5efa\u8bae"}),Object(x["jsx"])("div",{className:"w-8 h-1 mt-2 mb-4 center rounded-full bg-gradient-to-l from-blue-300 via-blue-500 to-blue-700",_nk:"".concat(m,"19")})]}),Object(x["jsxs"])("div",{className:"w-full space-y-2",_nk:"".concat(m,"1a"),children:[Object(x["jsx"])("label",{className:"text-base font-semibold text-gray-800",_nk:"".concat(m,"51"),children:"\u6807\u9898 "}),Object(x["jsx"])("input",{className:"appearance-none block w-full bg-gray-100 text-grey-darker border border-grey-lighter rounded-lg h-10 px-4",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",type:"text",onChange:e=>T(e.target.value),name:"integration[street_address]",id:"integration_street_address",_nk:"".concat(m,"61")})]}),Object(x["jsxs"])("div",{className:"w-full space-y-2",_nk:"".concat(m,"1b"),children:[Object(x["jsx"])("label",{className:"text-base font-semibold text-gray-800",_nk:"".concat(m,"52"),children:"\u8be6\u7ec6\u60c5\u51b5"}),Object(x["jsx"])("textarea",{name:"message",id:"",placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u4fe1\u606f",spellCheck:"false",className:"w-full h-28 appearance-none block bg-gray-100 text-grey-darker border border-grey-lighter rounded-lg py-4 px-4",onChange:e=>M(e.target.value),_nk:"".concat(m,"71")})]}),Object(x["jsx"])("div",{className:"px-0",_nk:"".concat(m,"1c"),children:Object(x["jsx"])("div",{className:"w-full bg-blue-100 bg-opacity-60 flex justify-center items-center border border-dashed border-blue-300 rounded-lg",_nk:"".concat(m,"1d"),children:Object(x["jsx"])(h["a"],{onChange:G,accept:"image/*",_nk:"".concat(m,"81"),children:Object(x["jsxs"])("div",{className:"flex flex-col items-center py-2",_nk:"".concat(m,"1e"),children:[Object(x["jsx"])("div",{className:"h-14 w-14 bg-blue-400 my-2 rounded-full flex justify-center items-center",_nk:"".concat(m,"1f"),children:Object(x["jsxs"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(m,"91"),children:[Object(x["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z",_nk:"".concat(m,"a1")}),Object(x["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z",_nk:"".concat(m,"a2")})]})}),Object(x["jsx"])("p",{className:"text-base font-medium text-blue-500 my-1",_nk:"".concat(m,"43"),children:"\u4e0a\u4f20\u56fe\u7247"})]})})})}),Object(x["jsx"])("div",{className:"grid grid-cols-3 gap-4 my-2",_nk:"".concat(m,"1g"),children:Q.map(((e,t)=>{var c=e;return Object(x["jsxs"])("div",{className:"bg-white relative border border-blue-500 rounded-lg",_nk:"iAr".concat(m,"1h"),children:[Object(x["jsx"])("div",{className:"absolute text-white top-0 right-0",onClick:()=>X(t),_nk:"".concat(m,"1i"),children:Object(x["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(m,"92"),children:Object(x["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z",_nk:"".concat(m,"a3")})})}),Object(x["jsx"])("a",{href:c.thumbnail,target:"_blank",_nk:"".concat(m,"b1"),children:Object(x["jsx"])("img",{className:"w-24 h-24 object-contain",src:c.thumbnail,alt:"",_nk:"".concat(m,"32")})})]},t)}))}),Object(x["jsx"])("div",{_nk:"".concat(m,"1j"),children:Object(x["jsx"])("button",{className:"w-full mb-2 bg-blue-500 p-2 text-base shadow font-semibold tracking-wider text-white rounded-full",onClick:()=>F(),_nk:"".concat(m,"c1"),children:"\u63d0\u4ea4"})})]})]})]})}},uk8H:function(e,t,c){e.exports=c.p+"static/hotTopicBG.d1c3cc4a.png"}}]);