(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{"L+2y":function(e,t,c){"use strict";c("q1tI");var n=c("uzmA"),a=c("nKUr"),s="ld79",r=e=>{var t=e.id,c=e.img,r=e.title,i=e.margin,l=e.limit,o=(e.sale,e.timeLimit),d=e.subTitle,u=e.price,j=e.actionButton,x=e.onClick;return Object(a["jsxs"])("li",{className:"flex w-full space-x-2 py-3 border-b","data-id":"tag"+t,_nk:"".concat(s,"11"),children:[Object(a["jsx"])(n["a"],{className:"flex-shrink-0 object-cover w-20 h-20 rounded bg-gray-300",src:null!==c&&void 0!==c?c:"",alt:"\u83dc\u54c1\u56fe\u7247",_nk:"".concat(s,"21")}),Object(a["jsxs"])("div",{className:"flex flex-col justify-between w-full",_nk:"".concat(s,"31"),children:[Object(a["jsx"])("div",{onClick:e=>{e.stopPropagation(),x&&x()},className:"flex justify-between items-center w-full pb-2 space-x-2",_nk:"".concat(s,"32"),children:Object(a["jsxs"])("div",{className:"space-y-1",_nk:"".concat(s,"33"),children:[Object(a["jsx"])("h3",{className:"text-base font-semibold leading-snug",_nk:"".concat(s,"41"),children:r}),Object(a["jsxs"])("p",{className:"text-xs text-gray-500",_nk:"".concat(s,"51"),children:[i?Object(a["jsxs"])("span",{className:"text-red-400",_nk:"".concat(s,"61"),children:["\u5e93\u5b58",i,"\u4efd\uff0c"]}):"",l?Object(a["jsxs"])("span",{className:"text-red-400",_nk:"".concat(s,"62"),children:["\u9650\u8d2d",l,"\u4efd"]}):""]}),o?Object(a["jsxs"])("p",{className:"text-xs text-blue-400",_nk:"".concat(s,"52"),children:["\u5f00\u653e\u8d2d\u4e70\u65f6\u95f4\uff1a",o[0],"~",o[1]]}):"",Object(a["jsx"])("p",{className:"text-xs text-gray-500",_nk:"".concat(s,"53"),children:d})]})}),Object(a["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(s,"34"),children:[Object(a["jsxs"])("p",{className:"text-sm font-semibold text-red-400",_nk:"".concat(s,"54"),children:["\uffe5",u,"\u5143"]}),j]})]})]})};t["a"]=r},NQFS:function(e,t,c){"use strict";c.r(t);var n=c("k1fw"),a=c("9og8"),s=c("tJVT"),r=c("WmNS"),i=c.n(r),l=c("9mPY"),o=c("PCcL"),d=c("q1tI"),u=c("Ty5D"),j=c("9kvl"),x=c("pf/J"),b=c("VsxY"),m=c("L+2y"),h=c("nKUr"),p="S1fx",f=()=>{var e=Object(u["h"])(),t=e,c=Object(j["e"])("useWeChat"),r=c.wxPayAwake,f=Object(d["useState"])({canteenId:t.id,extraInfo:"",flag:0}),O=Object(s["a"])(f,2),k=O[0],v=O[1],w=Object(d["useState"])(0),g=Object(s["a"])(w,2),_=g[0],y=g[1],N=Object(d["useState"])(),I=Object(s["a"])(N,2),C=I[0],S=I[1],L=function(){var e=Object(a["a"])(i.a.mark((function e(t){var c,a,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o["q"])({data:{canteenId:t}});case 3:c=e.sent,c&&c.status&&(a=[],s=0,c.result.forEach((e=>{e.goodsCount&&(s+=e.goodsCount*e.price,a.push({goodsId:e.pid,count:e.goodsCount}))})),v(Object(n["a"])(Object(n["a"])({},k),{},{itemList:a})),y(s),S(c.result)),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),J=Object(h["jsxs"])("div",{className:"bg-white px-6 flex-1 overflow-y-scroll mx-4 rounded mt-4",_nk:"".concat(p,"11"),children:[C&&0!==C.length&&C.map(((e,t)=>{var c,n;return Object(h["jsx"])(m["a"],{id:e.categoryId,title:e.name,subTitle:e.introduction,price:e.price,actionButton:Object(h["jsxs"])("div",{className:"font-semibold",_nk:"".concat(p,"12"),children:["x ",e.goodsCount]}),img:null===(c=e.picList)||void 0===c||null===(n=c[0])||void 0===n?void 0:n.base64,_nk:"iAr".concat(p,"21")},e.pid)})),(!C||0===C.length)&&Object(h["jsx"])("div",{className:"text-center text-gray-500 h-36 flex items-center justify-center font-bold text-lg",_nk:"".concat(p,"13"),children:"\u60a8\u672a\u9009\u62e9\u5546\u54c1"})]}),P=Object(d["useState"])(),T=Object(s["a"])(P,2),q=T[0],A=T[1],z=function(){var e=Object(a["a"])(i.a.mark((function e(t){var c;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o["h"])({params:{pid:t}});case 3:c=e.sent,c&&c.status&&A(c.result.canteen),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),B=q&&Object(h["jsxs"])("div",{className:"bg-white px-6 py-3 mx-4 rounded mt-1",_nk:"".concat(p,"14"),children:[Object(h["jsxs"])("div",{className:"flex items-center justify-between ",_nk:"".concat(p,"15"),children:[Object(h["jsxs"])("div",{_nk:"".concat(p,"16"),children:[Object(h["jsx"])("div",{className:"text-lg font-semibold",_nk:"".concat(p,"17"),children:q.name}),Object(h["jsx"])("div",{_nk:"".concat(p,"18"),children:q.introduction})]}),Object(h["jsxs"])("div",{className:"flex items-end justify-end w-32",_nk:"".concat(p,"19"),children:["\u5c0f\u8ba1\uffe5",Object(h["jsx"])("div",{className:"text-2xl font-semibold",_nk:"".concat(p,"1a"),children:_})]})]}),Object(h["jsxs"])("div",{className:"flex mt-2 items-center sticky bottom-0",_nk:"".concat(p,"1b"),children:[Object(h["jsx"])("div",{className:"font-semibold w-16",_nk:"".concat(p,"1c"),children:"\u5907\u6ce8"}),Object(h["jsx"])("input",{value:k.extraInfo,onChange:e=>{v(Object(n["a"])(Object(n["a"])({},k),{},{extraInfo:e.target.value}))},className:"block appearance-none text-xs placeholder-gray-500 placeholder-opacity-100 border border-light-blue-400 rounded-md w-full py-1 px-4 text-gray-700 leading-5 focus:outline-none focus:ring-1 focus:ring-light-blue-300",placeholder:"\u8bf7\u5728\u6b64\u5904\u586b\u5199\u5907\u6ce8",_nk:"".concat(p,"31")})]})]});Object(d["useEffect"])((()=>{z(t.id),L(t.id)}),[]);var E=function(){var e=Object(a["a"])(i.a.mark((function e(t){var c;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["p"])({params:{pid:t}});case 2:c=e.sent,c&&c.status?r(c.result,"/canteen/user/record"):(x["a"].show("\u5524\u9192\u652f\u4ed8\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u5728\u5217\u8868\u9875\u8fdb\u884c\u652f\u4ed8"),j["a"].replace("/canteen/user/record"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(d["useState"])(!1),K=Object(s["a"])(F,2),U=K[0],V=K[1],W=function(){var e=Object(a["a"])(i.a.mark((function e(){var t,c,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==_){e.next=3;break}return x["a"].show("\u603b\u4ef7\u4e3a0\uff0c\u8bf7\u786e\u8ba4\u5546\u54c1\u9009\u62e9"),e.abrupt("return");case 3:if(null!==(t=k.itemList)&&void 0!==t&&t.length){e.next=6;break}return x["a"].show("\u8bf7\u9009\u62e9\u83dc\u54c1"),e.abrupt("return");case 6:if(!U){e.next=8;break}return e.abrupt("return");case 8:return V(!0),e.prev=9,e.next=12,Object(o["a"])({data:k});case 12:c=e.sent,c&&c.status?(V(!1),c.result.orderId&&(x["a"].show(c.message),c.result.orderId&&E(c.result.orderId)),c.result.orderId||(n=b["a"].alert({title:"\u4e0b\u5355\u5931\u8d25",content:Object(h["jsxs"])("div",{_nk:"".concat(p,"1d"),children:[Object(h["jsx"])("div",{_nk:"".concat(p,"1e"),children:c.message}),Object(h["jsxs"])("div",{_nk:"".concat(p,"1f"),children:["\u65e0\u6cd5\u8d2d\u4e70\u4ea7\u54c1\uff1a",c.result.name]})]}),onCancel:()=>{n.hide()}}))):V(!1),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](9),V(!1);case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}}(),Y=Object(h["jsx"])("div",{className:"fixed bottom-2 px-3 w-screen max-w-md mx-auto",_nk:"".concat(p,"1g"),children:Object(h["jsxs"])("div",{className:"flex w-fulltext-gray-800 justify-between bg-gray-700 rounded-full",_nk:"".concat(p,"1h"),children:[Object(h["jsx"])("div",{className:"flex justify-between px-6 py-2 text-white",_nk:"".concat(p,"1i"),children:Object(h["jsx"])("div",{className:"flex justify-between items-center",_nk:"".concat(p,"1j"),children:Object(h["jsx"])("div",{className:"text-left text-base",_nk:"".concat(p,"1k"),children:Object(h["jsxs"])("p",{_nk:"".concat(p,"41"),children:["\uffe5",Object(h["jsxs"])("span",{className:"font-semibold",_nk:"".concat(p,"51"),children:[_," \u5143"]})]})})})}),Object(h["jsx"])("div",{onClick:W,className:"flex justify-center items-center font-semibold bg-gradient-to-r from-yellow-300 to-yellow-400  px-6 rounded-r-full",_nk:"".concat(p,"1l"),children:"\u652f\u4ed8"})]})});return Object(h["jsx"])(h["Fragment"],{children:Object(h["jsxs"])("div",{className:"min-h-screen",_nk:"".concat(p,"1m"),children:[Object(h["jsx"])("div",{className:"sticky top-0 z-10",_nk:"".concat(p,"1n"),children:Object(h["jsx"])(l["a"],{title:"\u4ed8\u6b3e",_nk:"".concat(p,"61")})}),J,B,Y,Object(h["jsx"])("div",{className:"h-24",_nk:"".concat(p,"1o")})]})})};t["default"]=f}}]);