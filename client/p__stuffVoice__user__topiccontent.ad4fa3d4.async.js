(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[98],{SiRT:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return x}));var n=c("9og8"),a=c("tJVT"),s=c("WmNS"),r=c.n(s),o=c("q1tI"),i=c("9mPY"),l=c("Wgwc"),d=c.n(l),u=c("uzmA"),j=c("NPPy"),b=c("LQih"),m=c("nKUr"),h="qQXz";function x(){var e=sessionStorage.getItem("topicRegid"),t=j,c=sessionStorage.getItem("topicid");console.log(e+"    regid      topicid  "+c);var s=Object(o["useState"])(),l=Object(a["a"])(s,2),x=l[0],f=l[1],p=Object(o["useState"])(),v=Object(a["a"])(p,2),O=v[0],g=v[1],k=Object(o["useState"])(),w=Object(a["a"])(k,2),y=(w[0],w[1],Object(o["useState"])()),_=Object(a["a"])(y,2),N=_[0],S=_[1],C=function(){var e=Object(n["a"])(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b["r"])({data:{topicid:c}});case 3:t=e.sent,void 0!=t&&(n=t.result,console.log(n+" result result"),g(n)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var t=Object(n["a"])(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["q"])({data:{topicid:c,regid:e}});case 2:n=t.sent,void 0!=n&&(a=n.result,f(a));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(n["a"])(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["x"])({data:{id:c,regid:e,module:6}});case 2:n=t.sent,void 0!=n&&(a=n.result,S(a));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o["useEffect"])((()=>{}),[O]),Object(o["useEffect"])((()=>{console.log(N+"   pics")}),[N]),Object(o["useEffect"])((()=>{C(),L(),E()}),[]);var M=function(){var t=Object(n["a"])(r.a.mark((function t(n,a,s){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=s){t.next=10;break}return t.next=3,Object(b["C"])({data:{regid:e,topicid:c,replyid:n}});case 3:return t.sent,a+=1,t.next=7,Object(b["R"])({data:{replyid:n,hotcount:a}});case 7:t.sent,t.next=17;break;case 10:return a-=1,t.next=13,Object(b["R"])({data:{replyid:n,hotcount:a}});case 13:return t.sent,t.next=16,Object(b["g"])({data:{regid:e,replyid:n,topicid:c}});case 16:t.sent;case 17:L();case 18:case"end":return t.stop()}}),t)})));return function(e,c,n){return t.apply(this,arguments)}}(),Y=Object(o["useState"])(""),H=Object(a["a"])(Y,2),z=H[0],D=H[1],I=function(){var t=Object(n["a"])(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0==z.length){t.next=22;break}return t.prev=1,t.next=4,Object(b["B"])({data:{regid:e,topicid:c,replycontent:z}});case 4:t.sent,D(""),L(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:return t.prev=12,t.next=15,Object(b["U"])({data:{id:null===O||void 0===O?void 0:O.pid,replycount:null===O||void 0===O?void 0:O.replynum}});case 15:t.sent,C(),t.next=22;break;case 19:t.prev=19,t.t1=t["catch"](12),console.log(t.t1);case 22:case"end":return t.stop()}}),t,null,[[1,9],[12,19]])})));return function(){return t.apply(this,arguments)}}();return Object(m["jsxs"])("div",{className:"min-h-screen bg-white",_nk:"".concat(h,"11"),children:[Object(m["jsx"])(i["a"],{className:"sticky top-0 z-10",title:"\u8bdd\u9898\u5185\u5bb9",backTo:"/stuffVoice/user/home/hottopic",_nk:"".concat(h,"21")}),Object(m["jsxs"])("div",{className:"bg-white min-h-screen max-w-full p-4",_nk:"".concat(h,"12"),children:[Object(m["jsxs"])("div",{className:"w-full flex",_nk:"".concat(h,"13"),children:[Object(m["jsx"])("div",{className:"flex w-1/5",_nk:"".concat(h,"14"),children:Object(m["jsx"])("img",{className:"rounded-full h-16 w-16",src:null===O||void 0===O?void 0:O.img,alt:"\u5934\u50cf",_nk:"".concat(h,"31")})}),Object(m["jsxs"])("div",{className:"pl-5 w-4/5",_nk:"".concat(h,"15"),children:[Object(m["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(h,"16"),children:[Object(m["jsx"])("span",{className:"font-bold text-lg",_nk:"".concat(h,"41"),children:null===O||void 0===O?void 0:O.name}),Object(m["jsx"])("p",{className:"text-gray-500 mt-1",_nk:"".concat(h,"51"),children:d()(null===O||void 0===O?void 0:O.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(m["jsx"])("p",{className:"py-2 text-base my-2 text-gray-600",_nk:"".concat(h,"52"),children:null===O||void 0===O?void 0:O.topiccontent})]})]}),Object(m["jsx"])("div",{className:"p-4 flex",_nk:"".concat(h,"17"),children:null===N||void 0===N?void 0:N.map(((e,t)=>Object(m["jsx"])(u["a"],{className:"w-24 mx-1",src:e.base64,alt:"",_nk:"".concat(h,"61")},t)))}),Object(m["jsx"])("div",{className:"mt-4",_nk:"".concat(h,"18"),children:Object(m["jsx"])("div",{className:"space-y-4 flex-col bg-white",_nk:"".concat(h,"19"),children:null===x||void 0===x?void 0:x.map(((e,c)=>Object(m["jsxs"])("div",{className:"bg-gray-100 flex ml-5 rounded-md shadow",_nk:"".concat(h,"1a"),children:[Object(m["jsx"])("div",{className:"flex-shrink-0 ml-3",_nk:"".concat(h,"1b"),children:Object(m["jsx"])("img",{className:"mt-2 rounded-full w-10 h-10",src:e.img,alt:"\u5934\u50cf",_nk:"".concat(h,"32")})}),Object(m["jsxs"])("div",{className:"w-full rounded-md pl-4 pt-2 pb-1 pr-1 leading-relaxed",_nk:"".concat(h,"1c"),children:[Object(m["jsxs"])("div",{className:"flex justify-between",_nk:"".concat(h,"1d"),children:[Object(m["jsx"])("strong",{className:"text-base",_nk:"".concat(h,"71"),children:e.name}),Object(m["jsx"])("span",{className:"text-sm text-gray-400",_nk:"".concat(h,"42"),children:d()(e.createdTime).format("YYYY-MM-DD HH:mm:ss")})]}),Object(m["jsxs"])("div",{_nk:"".concat(h,"1e"),children:[Object(m["jsx"])("p",{className:"text-base text-gray-500",_nk:"".concat(h,"53"),children:e.replycontent}),Object(m["jsxs"])("div",{className:"mt-1 flex justify-end items-center",_nk:"".concat(h,"1f"),children:[Object(m["jsx"])("div",{className:"flex space-x-2 mr-2",_nk:"".concat(h,"1g"),children:Object(m["jsx"])("img",{className:"rounded-full w-6 h-6 border border-white",src:e.isup?t["thumbsdown"]:t["thumbs"],alt:"\u70b9\u8d5e",onClick:()=>M(e.pid,e.hotcount,e.isup),_nk:"".concat(h,"33")})}),Object(m["jsx"])("div",{className:"text-base text-gray-500 font-semibold",_nk:"".concat(h,"1h"),children:e.hotcount})]})]})]})]},e.pid)))})}),Object(m["jsxs"])("div",{className:"w-full flex justify-center items-center bg-white sticky bottom-2 my-4",_nk:"".concat(h,"1i"),children:[Object(m["jsx"])("input",{className:"w-3/4 rounded-l-full shadow px-4 py-2 focus:outline-none border",type:"text",placeholder:"\u8bf4\u70b9\u4ec0\u4e48\u5427\uff01",value:z,onChange:e=>D(e.target.value),_nk:"".concat(h,"81")}),Object(m["jsx"])("button",{className:"w-1/4 bg-blue-600 text-white text-base font-semibold rounded-r-full shadow hover:bg-indigo-600 py-2",onClick:()=>I(),_nk:"".concat(h,"91"),children:"\u53d1\u8868"})]})]})]})}},bdvc:function(e,t,c){"use strict";c.d(t,"c",(function(){return s})),c.d(t,"b",(function(){return r})),c.d(t,"a",(function(){return i}));var n=c("gGBh"),a="D1F47B856585C2806FA854DC3E78E4F5";function s(e){var t="";return e&&(t=n["sm4"].encrypt(e,a)),t}function r(e){return void 0!==e&&null!==e}function o(e){return/^\d+(\.\d+)?$/.test(e)}function i(e){if(r(e))return e=String(e),o(e)?"".concat(e,"px"):e}},uzmA:function(e,t,c){"use strict";var n=c("tJVT"),a=c("k1fw"),s=c("q1tI"),r=c("i8i4"),o=c.n(r),i=c("+DUQ"),l=c("bdvc"),d=c("nKUr"),u="x4MR",j=e=>{var t=e.src,c=e.className,r=e.alt,j=void 0===r?"":r,b=e.fit,m=void 0===b?"fill":b,h=e.position,x=void 0===h?"center":h,f=e.preview,p=void 0===f||f,v=e.showLoading,O=void 0===v||v,g=e.loadingIcon,k=e.showError,w=void 0===k||k,y=e.errorIcon,_=(e.iconSize,e.style),N=e.width,S=e.height,C=e.onLoad,L=e.onError,E=e.onClick,M=Object(s["useMemo"])((()=>{var e=Object(a["a"])({},_);return Object(l["b"])(N)&&(e.width=Object(l["a"])(N)),Object(l["b"])(S)&&(e.height=Object(l["a"])(S)),e}),[_]),Y="w-full h-full object-".concat(m," object-").concat(x),H=Object(s["useRef"])(null),z=Object(s["useState"])({loading:!0,error:!1}),D=Object(n["a"])(z,2),I=D[0],R=D[1],T=()=>{C&&C(),R({loading:!1,error:!1})},q=()=>{L&&L(),R({loading:!1,error:!0})},B=()=>{I.loading||I.error||(E&&E(),p&&Q(!0))},P=()=>I.error||!t?null:Object(d["jsx"])("img",{src:t,ref:H,alt:j,className:Y,onLoad:T,onError:q,onClick:B,_nk:"".concat(u,"11")}),A=()=>y?"string"===typeof y?Object(d["jsx"])("img",{src:y,alt:j,className:Y,_nk:"".concat(u,"12")}):y:Object(d["jsx"])("div",{className:"w-full h-full flex justify-center items-center bg-gray-200 text-white",_nk:"".concat(u,"21"),children:Object(d["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,_nk:"".concat(u,"31"),children:Object(d["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",_nk:"".concat(u,"41")})})}),J=()=>g?"string"===typeof g?Object(d["jsx"])("img",{src:g,alt:j,className:Y,_nk:"".concat(u,"13")}):g:Object(d["jsx"])("div",{className:"w-full h-full flex justify-center items-center bg-gray-200",_nk:"".concat(u,"22"),children:Object(d["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,_nk:"".concat(u,"32"),children:Object(d["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",_nk:"".concat(u,"42")})})}),U=()=>I.loading&&O?J():I.error&&w?A():null,V=Object(s["useState"])(!1),W=Object(n["a"])(V,2),F=W[0],Q=W[1],K=Object(i["useTransition"])(F,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{tension:400,friction:50}}),G=Object(s["useCallback"])((e=>{e&&e.querySelector("img")&&e.querySelector("img").getBoundingClientRect().height<document.documentElement.clientHeight&&e.classList.add("flex","items-center","justify-center")}),[]),X=()=>{var e=Object(d["jsx"])("div",{onClick:e=>{e.stopPropagation(),Q(!1)},style:{zIndex:999},className:"top-0 left-0 fixed w-screen h-screen bg-black",_nk:"".concat(u,"23"),children:Object(d["jsx"])("div",{ref:G,className:"w-screen h-screen overflow-y-auto",_nk:"".concat(u,"24"),children:Object(d["jsx"])("img",{src:t,className:"w-full",_nk:"".concat(u,"14")})})});return o.a.createPortal(K(((t,c)=>c&&Object(d["jsx"])(i["animated"].div,{style:t,_nk:"".concat(u,"51"),children:e}))),document.body)};return Object(d["jsxs"])("div",{style:M,className:"".concat(null!==c&&void 0!==c?c:""),_nk:"".concat(u,"25"),children:[P(),U(),X()]})};t["a"]=Object(s["memo"])(j)}}]);