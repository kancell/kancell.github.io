(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[85],{"N+uz":function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var n=c("k1fw"),a=c("9og8"),r=c("WmNS"),s=c.n(r),l=c("9kvl");function o(e){return i.apply(this,arguments)}function i(){return i=Object(a["a"])(s.a.mark((function e(t){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l["c"])("/pic/upload/upload-pic-group",Object(n["a"])({requestType:"form",method:"POST"},t||{})));case 1:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}},"XqT+":function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return k}));var n=c("9og8"),a=c("tJVT"),r=c("WmNS"),s=c.n(r),l=c("9mPY"),o=c("q1tI"),i=c("9kvl"),d=c("LQih"),u=c("uk8H"),b=c.n(u),j=c("pf/J"),h=c("+DKU"),x=c("N+uz"),p=c("nKUr"),m="UYCY";function k(){var e=Object(i["e"])("@@initialState"),t=e.initialState,c=(e.loading,e.error,e.refresh,e.setInitialState,t),r=c.user.id,u=Object(o["useState"])(),k=Object(a["a"])(u,2),g=k[0],f=k[1],v=Object(o["useState"])(),O=Object(a["a"])(v,2),w=O[0],_=O[1],y=function(){var e=Object(n["a"])(s.a.mark((function e(){var t,c;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["k"])({data:{userid:r}});case 3:t=e.sent,void 0!=t&&(c=t.result,f(c)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(n["a"])(s.a.mark((function e(){var t,c,n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["v"])();case 3:t=e.sent,void 0!=t&&(n=null===(c=t.result)||void 0===c?void 0:c.info,_(n)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=Object(o["useState"])(""),C=Object(a["a"])(S,2),I=C[0],L=C[1],z=Object(o["useState"])(""),H=Object(a["a"])(z,2),T=H[0],W=H[1],D=Object(o["useState"])(""),J=Object(a["a"])(D,2),q=J[0],A=J[1],B=Object(o["useState"])(""),M=Object(a["a"])(B,2),P=M[0],U=M[1],Y=Object(o["useState"])(["0"]),E=Object(a["a"])(Y,2),K=E[0],V=(E[1],Object(o["useState"])([])),F=Object(a["a"])(V,2),G=F[0],Q=F[1],X=function(){var e=Object(n["a"])(s.a.mark((function e(){var t,c,n,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,0!=I.length){e.next=5;break}alert("\u8bf7\u9009\u62e9\u4e1a\u52a1\u7c7b\u578b"),e.next=26;break;case 5:if(0!=T.length){e.next=9;break}alert("\u8bf7\u8f93\u5165\u6807\u9898"),e.next=26;break;case 9:if(0!=q.length){e.next=13;break}alert("\u8bf7\u9009\u62e9\u90e8\u95e8"),e.next=26;break;case 13:if(0!=P.length){e.next=17;break}alert("\u8bf7\u8f93\u5165\u5185\u5bb9"),e.next=26;break;case 17:return e.next=19,Object(d["y"])({data:{userid:r,type:I,title:T,topart:q,content:P,pic:K}});case 19:return t=e.sent,c=t.status,e.next=23,Object(d["P"])({data:{userid:r,advicesCount:null===g||void 0===g?void 0:g.advicesCount}});case 23:n=e.sent,a=n.status,1==c&&1==a&&history.go(-1);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](0),console.log(e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}();Object(o["useEffect"])((()=>{y(),N()}),[]),Object(o["useEffect"])((()=>{}),[g,I,T,q,P,w]);var R=function(){var e=Object(n["a"])(s.a.mark((function e(t){var c,n,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return j["a"].show("\u4e0a\u4f20\u56fe\u7247\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"),e.prev=1,c=new FormData,c.append("file",t.file),console.log(c),e.next=7,Object(x["a"])({data:c});case 7:n=e.sent,n&&n.status&&(j["a"].show("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),"0"==K[0]?K[0]=n.result.IDInfoList[0].ImageId:K.push(n.result.IDInfoList[0].ImageId),a=G.concat(t),console.log(K),Q(a)),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](1);case 13:console.log(t);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),Z=e=>{var t=[...G];t.splice(e,1),K.splice(e,1),console.log(K+"    deleteImg "),Q(t)};return Object(p["jsxs"])("div",{className:"min-h-screen bg-white",_nk:"".concat(m,"11"),children:[Object(p["jsx"])(l["a"],{className:"sticky top-0 z-10",title:"\u63d0\u51fa\u65b0\u5efa\u8bae",_nk:"".concat(m,"21")}),Object(p["jsxs"])("div",{className:"flex flex-col mx-4 my-2",_nk:"".concat(m,"12"),children:[Object(p["jsxs"])("div",{className:"h-32 w-full bg-cover bg-no-repeat bg-center rounded-lg flex justify-center items-center shadow",style:{backgroundImage:"url('".concat(b.a,"')")},_nk:"".concat(m,"13"),children:[Object(p["jsx"])("div",{className:"h-32 w-2/5 flex justify-center items-center mx-4",_nk:"".concat(m,"14"),children:Object(p["jsx"])("img",{className:"h-20 w-20 rounded-full",src:null===g||void 0===g?void 0:g.img,alt:"\u5934\u50cf",_nk:"".concat(m,"31")})}),Object(p["jsxs"])("div",{className:"h-32 mx-2 w-3/5 flex flex-col justify-center",_nk:"".concat(m,"15"),children:[Object(p["jsx"])("p",{className:"text-white font-semibold text-xl mb-2",_nk:"".concat(m,"41"),children:null===g||void 0===g?void 0:g.name}),Object(p["jsx"])("p",{className:"text-white text-base",_nk:"".concat(m,"42"),children:null===g||void 0===g?void 0:g.partment})]})]}),Object(p["jsxs"])("div",{className:"form space-y-4 mt-5",_nk:"".concat(m,"16"),children:[Object(p["jsxs"])("div",{className:"flex flex-col items-center",_nk:"".concat(m,"17"),children:[Object(p["jsx"])("div",{className:"text-xl font-semibold text-black",_nk:"".concat(m,"18"),children:"\u6211\u7684\u5efa\u8bae"}),Object(p["jsx"])("div",{className:"w-8 h-1 mt-2 mb-4 center rounded-full bg-gradient-to-l from-blue-300 via-blue-500 to-blue-700",_nk:"".concat(m,"19")})]}),Object(p["jsxs"])("div",{className:"w-full space-y-2",_nk:"".concat(m,"1a"),children:[Object(p["jsx"])("label",{className:"text-base font-semibold text-gray-800",_nk:"".concat(m,"51"),children:"\u4e1a\u52a1\u7c7b\u578b"}),Object(p["jsxs"])("select",{className:"w-full bg-gray-100 text-grey-darker border border-grey-lighter rounded-lg h-10 px-4",name:"integration[city_id]",id:"integration_city_id",onChange:e=>L(e.target.value),_nk:"".concat(m,"61"),children:[Object(p["jsx"])("option",{value:"",_nk:"".concat(m,"71"),children:"\u8bf7\u9009\u62e9\u4e1a\u52a1\u7c7b\u578b"}),Object(p["jsx"])("option",{value:"\u4e1a\u52a1\u7c7b",_nk:"".concat(m,"72"),children:"\u4e1a\u52a1\u7c7b"}),Object(p["jsx"])("option",{value:"\u7efc\u5408\u7c7b",_nk:"".concat(m,"73"),children:"\u7efc\u5408\u7c7b"}),Object(p["jsx"])("option",{value:"\u7f51\u8def\u7c7b",_nk:"".concat(m,"74"),children:"\u7f51\u8def\u7c7b"}),Object(p["jsx"])("option",{value:"\u7ba1\u7406\u7c7b",_nk:"".concat(m,"75"),children:"\u7ba1\u7406\u7c7b"})]})]}),Object(p["jsxs"])("div",{className:"w-full space-y-2",_nk:"".concat(m,"1b"),children:[Object(p["jsx"])("label",{className:"text-base font-semibold text-gray-800",_nk:"".concat(m,"52"),children:"\u6807\u9898 "}),Object(p["jsx"])("input",{className:"appearance-none block w-full bg-gray-100 text-grey-darker border border-grey-lighter rounded-lg h-10 px-4",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",type:"text",onChange:e=>W(e.target.value),name:"integration[street_address]",id:"integration_street_address",_nk:"".concat(m,"81")})]}),Object(p["jsxs"])("div",{className:"w-full space-y-2",_nk:"".concat(m,"1c"),children:[Object(p["jsx"])("label",{className:"text-base font-semibold text-gray-800",_nk:"".concat(m,"53"),children:"\u9009\u62e9\u90e8\u95e8"}),Object(p["jsxs"])("select",{className:"block w-full bg-gray-100 text-grey-darker border border-grey-lighter rounded-lg h-10 px-4",onChange:e=>A(e.target.value),name:"integration[city_id]",id:"integration_city_id",_nk:"".concat(m,"62"),children:[Object(p["jsx"])("option",{value:"",_nk:"".concat(m,"76"),children:"\u8bf7\u9009\u62e9\u90e8\u95e8"}),null===w||void 0===w?void 0:w.map(((e,t)=>Object(p["jsx"])("option",{value:e.deptName,_nk:"".concat(m,"77"),children:e.deptName},e.deptName)))]})]}),Object(p["jsxs"])("div",{className:"w-full space-y-2",_nk:"".concat(m,"1d"),children:[Object(p["jsx"])("label",{className:"text-base font-semibold text-gray-800",_nk:"".concat(m,"54"),children:"\u8be6\u7ec6\u60c5\u51b5"}),Object(p["jsx"])("textarea",{name:"message",id:"",placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u4fe1\u606f",spellCheck:"false",className:"w-full h-28 appearance-none block bg-gray-100 text-grey-darker border border-grey-lighter rounded-lg py-4 px-4",onChange:e=>U(e.target.value),_nk:"".concat(m,"91")})]}),Object(p["jsx"])("div",{className:"px-0",_nk:"".concat(m,"1e"),children:Object(p["jsx"])("div",{className:"w-full bg-blue-100 bg-opacity-60 flex justify-center items-center border border-dashed border-blue-300 rounded-lg",_nk:"".concat(m,"1f"),children:Object(p["jsx"])(h["a"],{onChange:R,accept:"image/*",_nk:"".concat(m,"a1"),children:Object(p["jsxs"])("div",{className:"flex flex-col items-center py-2",_nk:"".concat(m,"1g"),children:[Object(p["jsx"])("div",{className:"h-14 w-14 bg-blue-400 my-2 rounded-full flex justify-center items-center",_nk:"".concat(m,"1h"),children:Object(p["jsxs"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(m,"b1"),children:[Object(p["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z",_nk:"".concat(m,"c1")}),Object(p["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z",_nk:"".concat(m,"c2")})]})}),Object(p["jsx"])("p",{className:"text-base font-medium text-blue-500 my-1",_nk:"".concat(m,"43"),children:"\u4e0a\u4f20\u56fe\u7247"})]})})})}),Object(p["jsx"])("div",{className:"grid grid-cols-3 gap-4 my-2",_nk:"".concat(m,"1i"),children:G.map(((e,t)=>{var c=e;return Object(p["jsxs"])("div",{className:"bg-white relative border border-blue-500 rounded-lg",_nk:"iAr".concat(m,"1j"),children:[Object(p["jsx"])("div",{className:"absolute text-white top-0 right-0",onClick:()=>Z(t),_nk:"".concat(m,"1k"),children:Object(p["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(m,"b2"),children:Object(p["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z",_nk:"".concat(m,"c3")})})}),Object(p["jsx"])("a",{href:c.thumbnail,target:"_blank",_nk:"".concat(m,"d1"),children:Object(p["jsx"])("img",{className:"w-24 h-24 object-contain",src:c.thumbnail,alt:"",_nk:"".concat(m,"32")})})]},t)}))}),Object(p["jsx"])("div",{_nk:"".concat(m,"1l"),children:Object(p["jsx"])("button",{className:"w-full mb-2 bg-blue-500 p-2 text-base shadow font-semibold tracking-wider text-white rounded-full",onClick:()=>X(),_nk:"".concat(m,"e1"),children:"\u63d0\u4ea4"})})]})]})]})}},uk8H:function(e,t,c){e.exports=c.p+"static/hotTopicBG.d1c3cc4a.png"}}]);