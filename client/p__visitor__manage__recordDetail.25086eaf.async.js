(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{"5Ftn":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n("nKUr"),a="+aEd";function i(e){return Object(c["jsxs"])("div",{className:"break-all border-gray-100 border bg-white flex px-4 text-base justify-between items-center min-h-14",_nk:"".concat(a,"11"),children:[Object(c["jsxs"])("div",{className:"w-28 p-1 text-left flex-0",_nk:"".concat(a,"12"),children:[e.Required?Object(c["jsx"])("span",{className:"text-red-500 relative right-0.5",_nk:"".concat(a,"21"),children:"*"}):null,e.title]}),Object(c["jsx"])("div",{className:"px-1 flex flex-1 justify-between items-center",_nk:"".concat(a,"13"),children:e.children})]})}},"73G7":function(e,t,n){e.exports=n.p+"static/banner2.5795a5d0.png"},"8xVO":function(e,t,n){"use strict";var c=n("ryPu"),a=n.n(c);n.d(t,"a",(function(){return a.a}));var i=n("73G7"),r=n.n(i);n.d(t,"b",(function(){return r.a}));var s=n("BKbo"),o=n.n(s);n.d(t,"d",(function(){return o.a}));var d=n("oLrZ"),l=n.n(d);n.d(t,"c",(function(){return l.a}))},"9mPY":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n("9kvl"),a=n("nKUr"),i="8umz";function r(e){var t=e.title,n=e.backTo,r=e.children,s=e.className,o=()=>{void 0===n?c["a"].goBack():c["a"].push(n)};return Object(a["jsx"])(a["Fragment"],{children:Object(a["jsxs"])("div",{className:"".concat(null!==s&&void 0!==s?s:""," flex justify-between items-center px-2 py-2.5 bg-white border-b"),_nk:"".concat(i,"11"),children:[Object(a["jsx"])("div",{className:"flex flex-1 font-semibold text-base mx-2 ml-auto",onClick:()=>o(),_nk:"".concat(i,"12"),children:Object(a["jsx"])("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",_nk:"".concat(i,"21"),children:Object(a["jsx"])("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",_nk:"".concat(i,"31")})})}),Object(a["jsx"])("div",{className:"flex justify-center font-semibold text-base flex-nowrap",_nk:"".concat(i,"13"),children:t}),Object(a["jsx"])("div",{className:"flex flex-1 flex-row-reverse",_nk:"".concat(i,"14"),children:r})]})})}},BKbo:function(e,t,n){e.exports=n.p+"static/header.af01ecf4.png"},JWsu:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return x}));var c=n("k1fw"),a=n("9og8"),i=n("WmNS"),r=n.n(i),s=n("9kvl");function o(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["c"])("/we/visit/add-visit-operator-info",Object(c["a"])({method:"POST"},t||{})));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["c"])("/we/visit/get-visit-audit-list",Object(c["a"])({method:"GET"},t||{})));case 1:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function b(e){return j.apply(this,arguments)}function j(){return j=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["c"])("/we/visit/get-visit-audit-info-list",Object(c["a"])({method:"GET"},t||{})));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function v(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["c"])("/we/visit/get-visit-audit-info",Object(c["a"])({method:"GET"},t||{})));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function x(e){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["c"])("/we/visit/visit-audit",Object(c["a"])({method:"POST"},t||{})));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},W7Pg:function(e,t,n){"use strict";var c=n("q1tI"),a=n("lsKZ"),i=n("/iMU"),r=n("5Ftn"),s=n("crOQ"),o=n("uzmA"),d=n("nKUr"),l="GW+d",u=e=>{var t,n=null===e||void 0===e?void 0:e.data,c=Object(d["jsxs"])("div",{className:"rounded overflow-hidden",_nk:"".concat(l,"11"),children:[Object(d["jsx"])(r["a"],{title:"\u6765\u8bbf\u4eba\u59d3\u540d",_nk:"".concat(l,"21"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.name)||"\u6682\u65e0",_nk:"".concat(l,"31")})}),Object(d["jsx"])(r["a"],{title:"\u6765\u8bbf\u4eba\u8eab\u4efd\u8bc1\u53f7",_nk:"".concat(l,"22"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.idCard)||"\u6682\u65e0",_nk:"".concat(l,"32")})}),Object(d["jsx"])(r["a"],{title:"\u6765\u8bbf\u4eba\u8054\u7cfb\u65b9\u5f0f",_nk:"".concat(l,"23"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.mobile)||"\u6682\u65e0",_nk:"".concat(l,"33")})}),Object(d["jsx"])(r["a"],{title:"\u6765\u8bbf\u4eba\u516c\u53f8\u540d",_nk:"".concat(l,"24"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.company)||"\u6682\u65e0",_nk:"".concat(l,"34")})}),Object(d["jsx"])(r["a"],{title:"\u8bbf\u95ee\u4e8b\u7531",_nk:"".concat(l,"25"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.remark)||"\u6682\u65e0",_nk:"".concat(l,"35")})}),Object(d["jsx"])(r["a"],{title:"\u6765\u8bbf\u4eba\u8f66\u724c",_nk:"".concat(l,"26"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.licensePlate)||"\u6682\u65e0",_nk:"".concat(l,"36")})}),Object(d["jsx"])(r["a"],{title:"\u53d7\u8bbf\u4eba\u90e8\u95e8",_nk:"".concat(l,"27"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.visitedPersonDeptname)||"\u6682\u65e0",_nk:"".concat(l,"37")})}),Object(d["jsx"])(r["a"],{title:"\u53d7\u8bbf\u4eba\u59d3\u540d",_nk:"".concat(l,"28"),children:Object(d["jsx"])(a["a"],{type:"text",disabled:!0,value:(null===n||void 0===n?void 0:n.visitedPersonName)||"\u6682\u65e0",_nk:"".concat(l,"38")})}),Object(d["jsx"])(r["a"],{title:"\u5f00\u59cb\u65f6\u95f4",_nk:"".concat(l,"29"),children:Object(d["jsx"])(i["a"],{disabled:!0,title:"\u9009\u62e9\u65f6\u95f4",mode:"date",value:(null===n||void 0===n?void 0:n.startTime)||"\u6682\u65e0",_nk:"".concat(l,"41")})}),Object(d["jsx"])(r["a"],{title:"\u7ed3\u675f\u65f6\u95f4",_nk:"".concat(l,"2a"),children:Object(d["jsx"])(i["a"],{title:"\u9009\u62e9\u65f6\u95f4",disabled:!0,mode:"date",value:(null===n||void 0===n?void 0:n.endTime)||"\u6682\u65e0",_nk:"".concat(l,"42")})}),Object(d["jsx"])(r["a"],{title:"\u8bbf\u5ba2\u4eba\u8138\u3001\u5065\u5eb7\u7801\u3001\u884c\u7a0b\u7801\u56fe\u7247",_nk:"".concat(l,"2b"),children:Object(d["jsx"])("div",{className:"p-2 grid grid-cols-2 gap-2",_nk:"".concat(l,"12"),children:null===n||void 0===n||null===(t=n.picUrl)||void 0===t?void 0:t.map(((e,t)=>Object(d["jsx"])(o["a"],{src:e.ImageUrl,className:"w-full object-cover",_nk:"".concat(l,"51")},t)))})})]});return Object(d["jsx"])(d["Fragment"],{children:n?c:Object(d["jsx"])(s["a"],{_nk:"".concat(l,"61")})})};t["a"]=Object(c["memo"])(u)},dX6L:function(e,t,n){"use strict";n.r(t);var c=n("k1fw"),a=n("9og8"),i=n("tJVT"),r=n("WmNS"),s=n.n(r),o=n("q1tI"),d=n("Ty5D"),l=n("9kvl"),u=n("JWsu"),b=n("W7Pg"),j=n("9mPY"),v=n("8xVO"),p=n("D3E4"),x=n("lsKZ"),m=n("VsxY"),f=n("pf/J"),O=n("5Ftn"),h=n("zM3Q"),k=n("nKUr"),g="d4/p",w=()=>{var e,t,n,r=Object(d["h"])(),w=r,_=Object(l["e"])("@@initialState"),y=_.initialState,N=(_.loading,_.error,_.refresh,_.setInitialState,y),S=Object(l["d"])(),I=Object(o["useState"])(S.visitorAdmin?"admin":"visited"),P=Object(i["a"])(I,2),C=(P[0],P[1],Object(o["useState"])("pending")),T=Object(i["a"])(C,2),K=T[0],E=T[1],F=Object(o["useState"])(),L=Object(i["a"])(F,2),U=L[0],W=L[1],J=function(){var e=Object(a["a"])(s.a.mark((function e(){var t,n,a,i,r;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["e"])({params:{id:w.id}});case 2:if(a=e.sent,!a||!a.status){e.next=18;break}W(a.result.info),e.t0=null===(t=a.result)||void 0===t||null===(n=t.info)||void 0===n?void 0:n.auditStatus,e.next="0"===e.t0?8:"1"===e.t0?10:"3"===e.t0?12:"2"===e.t0||"4"===e.t0?14:16;break;case 8:return E("pending"),e.abrupt("break",17);case 10:return E("pendingSuccess"),e.abrupt("break",17);case 12:return E("success"),e.abrupt("break",17);case 14:return E("reject"),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:V(Object(c["a"])(Object(c["a"])({},B),{},{id:null===(i=a.result)||void 0===i||null===(r=i.info)||void 0===r?void 0:r.id,visitedPersonId:"pending"===K?N.user.id:void 0,auditPersonId:"pendingSuccess"===K?N.user.id:void 0}));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=Object(k["jsxs"])("div",{className:"my-2 pb-2",_nk:"".concat(g,"11"),children:["pending"===K&&Object(k["jsx"])(O["a"],{title:"\u5ba1\u6279\u72b6\u6001",_nk:"".concat(g,"21"),children:"\u88ab\u62dc\u8bbf\u4eba\u5ba1\u6279\u4e2d"}),"pendingSuccess"===K&&Object(k["jsx"])(O["a"],{title:"\u5ba1\u6279\u72b6\u6001",_nk:"".concat(g,"22"),children:"\u88ab\u62dc\u8bbf\u4eba\u5ba1\u6279\u901a\u8fc7"}),"success"===K&&Object(k["jsx"])(O["a"],{title:"\u5ba1\u6279\u72b6\u6001",_nk:"".concat(g,"23"),children:"\u5ba1\u6279\u901a\u8fc7"}),"reject"===K&&Object(k["jsx"])(O["a"],{title:"\u5ba1\u6279\u72b6\u6001",_nk:"".concat(g,"24"),children:"\u5ba1\u6279\u672a\u901a\u8fc7"}),Object(k["jsx"])("div",{className:"".concat(0===(null===U||void 0===U||null===(e=U.auditInfoList)||void 0===e?void 0:e.length)?"hidden":"text-sm my-1 text-gray-500"),_nk:"".concat(g,"12"),children:"\u5ba1\u6279\u8bb0\u5f55"}),null===U||void 0===U||null===(t=U.auditInfoList)||void 0===t?void 0:t.map(((e,t)=>Object(k["jsx"])(O["a"],{title:e.userName,_nk:"".concat(g,"25"),children:e.auditInfo},e.rownum)))]});Object(o["useEffect"])((()=>{J()}),[]);var G=Object(o["useState"])(),q=Object(i["a"])(G,2),B=q[0],V=q[1],M=Object(o["useState"])(),Z=Object(i["a"])(M,2),A=Z[0],D=Z[1],R=function(){var e=Object(a["a"])(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["g"])({params:{roleKey:t}});case 2:n=e.sent,n&&n.status&&(c=n.result.info.map((e=>{var t;return{value:null!==(t=e.id)&&void 0!==t?t:"error",label:"".concat(e.deptName,"-").concat(e.userName,"\uff08").concat(e.phoneNumber,"\uff09")}})),D(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o["useEffect"])((()=>{R("visitor-admin")}),[]);var Y=Object(k["jsx"])(O["a"],{title:"\u6700\u7ec8\u5ba1\u6279\u4eba",Required:!0,_nk:"".concat(g,"26"),children:Object(k["jsx"])(p["a"],{value:null===B||void 0===B?void 0:B.auditPersonId,dataSource:A,onOk:e=>{V(Object(c["a"])(Object(c["a"])({},B),{},{auditPersonId:e[0].value}))},_nk:"".concat(g,"31")})}),Q=Object(k["jsxs"])("div",{className:"my-4 \n    ".concat("pending"===K||"pendingSuccess"===K&&(null===U||void 0===U||null===(n=U.auditInfoList[0])||void 0===n?void 0:n.auditPersonId)===N.user.id?"":"hidden"),_nk:"".concat(g,"13"),children:[Object(k["jsx"])(O["a"],{title:"\u5ba1\u6279\u610f\u89c1",_nk:"".concat(g,"27"),children:Object(k["jsx"])(x["a"],{type:"text",value:(null===B||void 0===B?void 0:B.auditInfo)||"",placeholder:"\u8bf7\u586b\u5199\u5ba1\u6279\u610f\u89c1",onChange:e=>{V(Object(c["a"])(Object(c["a"])({},B),{},{auditInfo:e}))},_nk:"".concat(g,"41")})}),"pending"===K&&Y,Object(k["jsxs"])("div",{className:"sticky bottom-4 mt-8 rounded-full flex divide-x divide-white text-center py-1.5 px-5 mx-4 text-white text-base font-semibold bg-gradient-to-r from-blue-400 to-blue-500",_nk:"".concat(g,"14"),children:[Object(k["jsx"])("div",{onClick:()=>{m["a"].confirm({title:"\u786e\u8ba4\u9000\u56de\u9884\u7ea6\u5417",content:"\u8fd9\u4e2a\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500",onCancel:()=>{},onOk:()=>{"pending"===K?te("2"):"pendingSuccess"===K&&te("4")}})},className:"flex-1",_nk:"".concat(g,"15"),children:"\u9000\u56de\u7533\u8bf7"}),Object(k["jsx"])("div",{onClick:()=>{m["a"].confirm({title:"\u786e\u8ba4\u901a\u8fc7\u9884\u7ea6\u7533\u8bf7\u5417",content:"\u8fd9\u4e2a\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500",onCancel:()=>{},onOk:()=>{"pending"===K?te("1"):"pendingSuccess"===K&&te("3")}})},className:"flex-1",_nk:"".concat(g,"16"),children:"\u901a\u8fc7\u7533\u8bf7"})]})]}),X=Object(o["useState"])(!1),H=Object(i["a"])(X,2),$=H[0],ee=H[1],te=function(){var e=Object(a["a"])(s.a.mark((function e(t){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==(null===B||void 0===B?void 0:B.auditPersonId)||"pending"!==K||"2"!==t&&"4"!==t){e.next=3;break}return f["a"].show("\u8bf7\u9009\u62e9\u6700\u7ec8\u5ba1\u6279\u4eba"),e.abrupt("return");case 3:if(!$){e.next=5;break}return e.abrupt("return");case 5:return ee(!0),e.next=8,Object(u["b"])({data:Object(c["a"])(Object(c["a"])({},B),{},{auditStatus:t})});case 8:n=e.sent,n&&n.status?(f["a"].show(n.message),ee(!1),J()):ee(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k["jsxs"])(k["Fragment"],{children:[Object(k["jsx"])("div",{className:"top-0 z-10",_nk:"".concat(g,"17"),children:Object(k["jsx"])(j["a"],{title:"\u6765\u8bbf\u9884\u7ea6",className:"text-white bg-blue-450",_nk:"".concat(g,"51")})}),Object(k["jsx"])(k["Fragment"],{children:Object(k["jsxs"])("div",{className:"bg-cover h-48 px-4 pt-3 absolute w-full top-10 max-w-lg",style:{backgroundImage:"url(".concat(v["c"],")")},_nk:"".concat(g,"18"),children:[Object(k["jsx"])("div",{className:"text-lg text-white font-medium",_nk:"".concat(g,"19"),children:"\u5ba1\u6279\u8bbf\u5ba2\u9884\u7ea6\u5355"}),Object(k["jsx"])("div",{className:"w-8 h-1 mt-2 ml-0.5 mb-4 rounded-full bg-gradient-to-l from-red-300 via-green-500 to-white",_nk:"".concat(g,"1a")}),Object(k["jsx"])(b["a"],{data:U,_nk:"".concat(g,"61")}),z,Q]})})]})};t["default"]=Object(o["memo"])(w)},oLrZ:function(e,t,n){e.exports=n.p+"static/formBg.5b3fe558.png"},ryPu:function(e,t,n){e.exports=n.p+"static/banner1.f197b063.png"},uzmA:function(e,t,n){"use strict";var c=n("tJVT"),a=n("q1tI"),i=n("i8i4"),r=n.n(i),s=n("nKUr"),o="x4MR";function d(e){var t=Object(a["useState"])(!1),n=Object(c["a"])(t,2),i=n[0],d=n[1];return Object(a["useEffect"])((()=>{var t=document.createElement("div");i&&(r.a.render(Object(s["jsx"])("div",{onClick:()=>{d(!i),document.body.removeChild(t)},className:"".concat(i?"":"hidden"," z-50 top-0 left-0 fixed w-screen h-screen flex items-center justify-center bg-opacity-60 bg-gray-800"),_nk:"".concat(o,"11"),children:Object(s["jsx"])("img",{src:e.src,className:"w-auto h-auto",_nk:"".concat(o,"21")})}),t),document.body.appendChild(t))}),[i]),Object(s["jsxs"])(s["Fragment"],{children:["bg"===e.type&&Object(s["jsx"])("div",{className:"".concat(e.className?e.className:""," bg-cover bg-center cursor-pointer border"),style:{backgroundImage:"url(".concat(e.src,")")},onClick:()=>d(!0),_nk:"".concat(o,"12")}),(!e.type||"img"===e.type)&&Object(s["jsx"])("img",{src:e.src,className:"".concat(e.className?e.className:""," cursor-pointer border"),onClick:()=>d(!0),_nk:"".concat(o,"22")})]})}t["a"]=Object(a["memo"])(d)}}]);